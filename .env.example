# ==========================================
# Contact Lens Color Inspection System
# Environment Configuration Template
# ==========================================
# 이 파일을 .env로 복사하여 사용하세요
# Windows: copy .env.example .env
# Linux/Mac: cp .env.example .env

# ------------------------------------------
# Application Settings
# ------------------------------------------
APP_NAME=Color_Meter
APP_VERSION=1.0.0
ENVIRONMENT=production  # development, staging, production
DEBUG=false

# ------------------------------------------
# Server Configuration
# ------------------------------------------
HOST=0.0.0.0
PORT=8000
WORKERS=4  # Number of worker processes (recommended: CPU cores)
RELOAD=false  # Set to true only in development

# ------------------------------------------
# Database Configuration
# ------------------------------------------
# SQLite (default for local/development)
DATABASE_URL=sqlite:///./data/inspection.db

# PostgreSQL (for production, uncomment to use)
# DATABASE_URL=postgresql://user:password@localhost:5432/color_meter

# ------------------------------------------
# Logging Configuration
# ------------------------------------------
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FILE=logs/app.log
LOG_MAX_SIZE=10485760  # 10MB
LOG_BACKUP_COUNT=5

# ------------------------------------------
# Security Settings
# ------------------------------------------
# Generate a secure secret key:
# python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-secret-key-here-change-this-in-production

# CORS settings (comma-separated origins)
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# ------------------------------------------
# File Upload Settings
# ------------------------------------------
MAX_UPLOAD_SIZE=10485760  # 10MB in bytes
ALLOWED_EXTENSIONS=.jpg,.jpeg,.png,.bmp,.tiff

# Upload directories
UPLOAD_DIR=./data/uploads
RESULTS_DIR=./results

# ------------------------------------------
# Image Processing Settings
# ------------------------------------------
# Default image processing parameters
DEFAULT_IMAGE_SIZE=1920x1080
IMAGE_QUALITY=95  # JPEG quality (0-100)

# ------------------------------------------
# Lens Detection Settings
# ------------------------------------------
LENS_DETECTION_METHOD=hybrid  # hough, contour, hybrid
LENS_DETECTION_CONFIDENCE_MIN=0.7
BACKGROUND_FALLBACK_ENABLED=true

# ------------------------------------------
# Color Analysis Settings
# ------------------------------------------
DELTA_E_METHOD=cie2000  # cie1976, cie1994, cie2000
CONFIDENCE_THRESHOLD=0.6
RETAKE_THRESHOLD=0.7

# ------------------------------------------
# Ink Estimation Settings (GMM)
# ------------------------------------------
INK_CHROMA_THRESHOLD=6.0
INK_L_DARK_THRESHOLD=45.0
INK_LINEARITY_THRESHOLD=3.0
INK_RANDOM_SEED=42

# ------------------------------------------
# SKU Configuration
# ------------------------------------------
SKU_CONFIG_PATH=./config/sku_configs.json
DEFAULT_SKU=DEFAULT

# ------------------------------------------
# Performance Settings
# ------------------------------------------
# Cache settings
CACHE_ENABLED=true
CACHE_SIZE_MB=100
CACHE_TTL_SECONDS=3600  # 1 hour

# Parallel processing
USE_MULTIPROCESSING=false  # Set to true for batch processing
MAX_WORKERS=4

# ------------------------------------------
# Monitoring & Telemetry (Optional)
# ------------------------------------------
ENABLE_TELEMETRY=false
TELEMETRY_ENDPOINT=http://localhost:9090

# ------------------------------------------
# Development Settings (development only)
# ------------------------------------------
# Set to true only in development environment
DEV_MODE=false
DEV_AUTO_RELOAD=false
DEV_SHOW_SQL=false

# ------------------------------------------
# Testing Settings (test environment only)
# ------------------------------------------
TEST_DATABASE_URL=sqlite:///:memory:
TEST_DATA_DIR=./tests/data

# ------------------------------------------
# Backup Settings
# ------------------------------------------
BACKUP_ENABLED=true
BACKUP_DIR=./backups
BACKUP_RETENTION_DAYS=30

# ------------------------------------------
# Email Notifications (Optional)
# ------------------------------------------
# Uncomment to enable email notifications
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=noreply@colormeter.com
# ALERT_RECIPIENTS=admin@example.com,operator@example.com

# ------------------------------------------
# External Integrations (Optional)
# ------------------------------------------
# MES (Manufacturing Execution System) integration
# MES_ENABLED=false
# MES_API_URL=http://mes-server:8080/api
# MES_API_KEY=your-mes-api-key

# ERP integration
# ERP_ENABLED=false
# ERP_API_URL=http://erp-server:8080/api
# ERP_API_KEY=your-erp-api-key

# ------------------------------------------
# Advanced Settings
# ------------------------------------------
# Zone analysis
ZONE_ANALYSIS_EXPECTED_ZONES=3  # 1, 2, or 3
ZONE_ANALYSIS_SECTOR_COUNT=24

# Radial profiling
RADIAL_PROFILE_ENABLED=true
RADIAL_PROFILE_BINS=200

# Ink mask integration
INK_MASK_ENABLED=true
INK_MASK_METHOD=gmm  # gmm, kmeans, threshold

# ------------------------------------------
# Notes
# ------------------------------------------
# 1. Never commit .env file to version control
# 2. Add .env to .gitignore
# 3. Use strong SECRET_KEY in production
# 4. Review all settings before deployment
# 5. Backup .env file securely
