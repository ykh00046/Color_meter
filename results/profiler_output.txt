Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.
Low image mean_L (9.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

==========================================================================================
  COMPREHENSIVE PERFORMANCE PROFILER - Contact Lens Inspection System
  Version: 2025-12-16 (2D Zone Analysis + InkEstimator)
==========================================================================================

Found 56 test images
SKU Config: SKU001.json

==========================================================================================
  SINGLE IMAGE PROFILING
==========================================================================================
Image: SKU001_NG_001.jpg
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] WARNING: Excluded fraction 31.25% > 30%, keeping top ranges
[TRANSITION] Found 14 transition ranges:
  - r=[0.004, 0.019], max_grad=9.92
  - r=[0.021, 0.031], max_grad=2.98
  - r=[0.031, 0.081], max_grad=4.28
  - r=[0.084, 0.091], max_grad=0.06
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.541, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.0037500000000000003, 0.01875, 9.920345306396484), (0.02125, 0.031249999999999997, 2.9771270751953125), (0.03125, 0.08125, 4.284839630126953), (0.08375, 0.09125, 0.05530548095703125), (0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.54125, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.54125), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 17.42% (0.057 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.541] rejected: estimated_pixels=5906 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[19.476255416870117, 0.0, 0.0], Lab_ink=None, std=[8.9, 0.0, 0.0], ΔE=75.55 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.61 (worst=C), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.01, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.42
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=26.22, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=66, a=128, b=128
[LAB→RGB] BGR: B=61, G=61, R=61
[LAB→RGB] Final RGB: R=61, G=61, B=61, HEX=#3D3D3D
[INK_ESTIMATOR] Detected 2 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 2 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.60, confidence=0.42
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0.0152106 0.        0.       ], Mid=[20.784313  0.        0.      ], Bright=[42.35654  0.       0.     ]
[MIXING_CHECK] Weights: Dark=0.709, Mid=0.128, Bright=0.163
[MIXING_CHECK] Distance: abs=0.00, relative=0.000 (len_db=42.34)
[MIXING_CHECK] Projection: ratio=0.491 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.491)
  - Close to line: True (rel_dist=0.000 < 0.15)
  - Mid weight OK: True (0.05 < 0.128 < 0.7)
[MIXING_CHECK] OK Mid-tone IS mixed (all conditions met). Merging to 2 inks.
[LAB→RGB] Input LAB: L=0.02, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=42.36, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=108, a=128, b=128
[LAB→RGB] BGR: B=100, G=100, R=100
[LAB→RGB] Final RGB: R=100, G=100, B=100, HEX=#646464

==========================================================================================
  Performance Profiling Results (Latest System)
==========================================================================================

Step                                     Time (ms)    %        Mem (MB)     CPU %
------------------------------------------------------------------------------------------
1. Image Loading                               1.27      0.1%        1.42      0.0%
2. Lens Detection                             13.67      0.6%        3.36    103.9%
3. 2D Zone Analysis                         2058.74     95.6%        8.08     61.8%
4. Image-Based Ink Estimation                 79.39      3.7%        0.93    901.3%
------------------------------------------------------------------------------------------
TOTAL                                       2153.07    100.0%           -        -
==========================================================================================

BOTTLENECK: 3. 2D Zone Analysis (2058.74ms, 95.6% of total)

==========================================================================================
  BATCH PROCESSING PROFILING
==========================================================================================

Batch size: 1 images
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[TRANSITION] WARNING: Excluded fraction 31.25% > 30%, keeping top ranges
[TRANSITION] Found 14 transition ranges:
  - r=[0.004, 0.019], max_grad=9.92
  - r=[0.021, 0.031], max_grad=2.98
  - r=[0.031, 0.081], max_grad=4.28
  - r=[0.084, 0.091], max_grad=0.06
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.541, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.0037500000000000003, 0.01875, 9.920345306396484), (0.02125, 0.031249999999999997, 2.9771270751953125), (0.03125, 0.08125, 4.284839630126953), (0.08375, 0.09125, 0.05530548095703125), (0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.54125, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.54125), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 17.42% (0.057 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.541] rejected: estimated_pixels=5906 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[19.476255416870117, 0.0, 0.0], Lab_ink=None, std=[8.9, 0.0, 0.0], ΔE=75.55 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.61 (worst=C), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.01, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.42
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=26.22, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=66, a=128, b=128
[LAB→RGB] BGR: B=61, G=61, R=61
[LAB→RGB] Final RGB: R=61, G=61, B=61, HEX=#3D3D3D
[INK_ESTIMATOR] Detected 2 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 2 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.60, confidence=0.42
  Total time:              213.78 ms
  Avg per image:           213.78 ms
  Throughput:                4.68 images/sec
  Peak memory:               0.61 MB

Batch size: 5 images
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] WARNING: Excluded fraction 31.25% > 30%, keeping top ranges
[TRANSITION] Found 14 transition ranges:
  - r=[0.004, 0.019], max_grad=9.92
  - r=[0.021, 0.031], max_grad=2.98
  - r=[0.031, 0.081], max_grad=4.28
  - r=[0.084, 0.091], max_grad=0.06
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.541, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.0037500000000000003, 0.01875, 9.920345306396484), (0.02125, 0.031249999999999997, 2.9771270751953125), (0.03125, 0.08125, 4.284839630126953), (0.08375, 0.09125, 0.05530548095703125), (0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.54125, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.54125), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 17.42% (0.057 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.541] rejected: estimated_pixels=5906 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[19.476255416870117, 0.0, 0.0], Lab_ink=None, std=[8.9, 0.0, 0.0], ΔE=75.55 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.61 (worst=C), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.
Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[CONFIDENCE] Scores: pixel=0.72, transition=0.01, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.42
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=26.22, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=66, a=128, b=128
[LAB→RGB] BGR: B=61, G=61, R=61
[LAB→RGB] Final RGB: R=61, G=61, B=61, HEX=#3D3D3D
[INK_ESTIMATOR] Detected 2 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 2 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.60, confidence=0.42
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] Found 12 transition ranges:
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.521, 0.531], max_grad=0.04
  - r=[0.536, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.971, 0.979], max_grad=0.04
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.52125, 0.53125, 0.04029868543148041), (0.5362500000000001, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9712500000000001, 0.97875, 0.04158782958984375), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.52125), (0.53125, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 21.97% (0.072 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.521] rejected: estimated_pixels=5347 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] Segment [0.531, 0.536] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[18.940698623657227, 0.0, 0.0], Lab_ink=None, std=[5.9, 0.0, 0.0], ΔE=76.09 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.31, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.49
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[20.784315  0.        0.      ], Bright=[42.34713  0.       0.     ]
[MIXING_CHECK] Weights: Dark=0.920, Mid=0.036, Bright=0.045
[MIXING_CHECK] Distance: abs=0.00, relative=0.000 (len_db=42.35)
[MIXING_CHECK] Projection: ratio=0.491 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.491)
  - Close to line: True (rel_dist=0.000 < 0.15)
  - Mid weight OK: False (0.05 < 0.036 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid weight out of range (weight=0.036)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=20.78, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=53, a=128, b=128
[LAB→RGB] BGR: B=50, G=50, R=50
[LAB→RGB] Final RGB: R=50, G=50, B=50, HEX=#323232
[LAB→RGB] Input LAB: L=42.35, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=107, a=128, b=128
[LAB→RGB] BGR: B=99, G=99, R=99
[LAB→RGB] Final RGB: R=99, G=99, B=99, HEX=#636363
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.78, confidence=0.49
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] WARNING: Excluded fraction 33.25% > 30%, keeping top ranges
[TRANSITION] Found 13 transition ranges:
  - r=[0.236, 0.266], max_grad=0.15
  - r=[0.269, 0.316], max_grad=9.61
  - r=[0.324, 0.331], max_grad=0.08
  - r=[0.336, 0.344], max_grad=0.05
  - r=[0.521, 0.536], max_grad=0.06
  - r=[0.536, 0.579], max_grad=31.07
  - r=[0.596, 0.609], max_grad=0.09
  - r=[0.764, 0.781], max_grad=0.08
  - r=[0.796, 0.829], max_grad=34.51
  - r=[0.841, 0.849], max_grad=0.07
  - r=[0.854, 0.866], max_grad=0.05
  - r=[0.894, 0.944], max_grad=15.63
  - r=[0.981, 0.994], max_grad=0.08
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...Low image mean_L (3.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.
Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.14507102966308594), (0.26875, 0.31625, 9.605903625488281), (0.32375000000000004, 0.33125, 0.07659339904785156), (0.33625, 0.34375000000000006, 0.05017709732055664), (0.52125, 0.5362499999999999, 0.06104397773742676), (0.5362500000000001, 0.57875, 31.070274353027344), (0.5962500000000001, 0.6087499999999999, 0.08892059326171875), (0.7637500000000002, 0.78125, 0.0814056396484375), (0.7962500000000001, 0.82875, 34.51351547241211), (0.84125, 0.8487499999999999, 0.074859619140625), (0.85375, 0.86625, 0.051744937896728516), (0.89375, 0.94375, 15.626752853393555), (0.9812500000000001, 0.9937499999999999, 0.07741546630859375)]
[AUTO ZONE B] Available segments after transition removal: [(0.33125, 0.33625), (0.34375000000000006, 0.52125), (0.5362499999999999, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.66)]
[AUTO ZONE B] excluded_ratio: 23.48% (0.077 / 0.330)
[AUTO ZONE B] Segment [0.344, 0.521] rejected: estimated_pixels=4963 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.609, 0.660] rejected: width=0.051 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.331, 0.336] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] Segment [0.536, 0.536] rejected: width=0.000 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.430145263671875, 0.0, 0.0], Lab_ink=None, std=[6.5, 0.0, 0.0], ΔE=71.60 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[26.23717498779297, 0.0, 0.0], Lab_ink=None, std=[36.9, 0.0, 0.0], ΔE=47.47 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[46.88304901123047, 0.0, 0.0], Lab_ink=None, std=[35.1, 0.0, 0.0], ΔE=29.18 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.03, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.42
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[LAB→RGB] Input LAB: L=2.75, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=7, a=128, b=128
[LAB→RGB] BGR: B=10, G=10, R=10
[LAB→RGB] Final RGB: R=10, G=10, B=10, HEX=#0A0A0A
[LAB→RGB] Input LAB: L=14.82, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=37, a=128, b=128
[LAB→RGB] BGR: B=36, G=37, R=36
[LAB→RGB] Final RGB: R=36, G=37, B=36, HEX=#242524
[INK_ESTIMATOR] Detected 2 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 2 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=49.42, confidence=0.42
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] WARNING: Excluded fraction 31.25% > 30%, keeping top ranges
[TRANSITION] Found 14 transition ranges:
  - r=[0.004, 0.019], max_grad=9.92
  - r=[0.021, 0.031], max_grad=2.98
  - r=[0.031, 0.081], max_grad=4.28
  - r=[0.084, 0.091], max_grad=0.06
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.541, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.0037500000000000003, 0.01875, 9.920345306396484), (0.02125, 0.031249999999999997, 2.9771270751953125), (0.03125, 0.08125, 4.284839630126953), (0.08375, 0.09125, 0.05530548095703125), (0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.54125, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.54125), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 17.42% (0.057 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.541] rejected: estimated_pixels=5906 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[19.476255416870117, 0.0, 0.0], Lab_ink=None, std=[8.9, 0.0, 0.0], ΔE=75.55 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.61 (worst=C), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.01, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.42
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=26.22, a=0.00, b=0.00Low image mean_L (3.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[LAB→RGB] OpenCV LAB: L=66, a=128, b=128
[LAB→RGB] BGR: B=61, G=61, R=61
[LAB→RGB] Final RGB: R=61, G=61, B=61, HEX=#3D3D3D
[INK_ESTIMATOR] Detected 2 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 2 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.60, confidence=0.42
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] WARNING: Excluded fraction 33.25% > 30%, keeping top ranges
[TRANSITION] Found 13 transition ranges:
  - r=[0.236, 0.266], max_grad=0.15
  - r=[0.269, 0.316], max_grad=9.61
  - r=[0.324, 0.331], max_grad=0.08
  - r=[0.336, 0.344], max_grad=0.05
  - r=[0.521, 0.536], max_grad=0.06
  - r=[0.536, 0.579], max_grad=31.07
  - r=[0.596, 0.609], max_grad=0.09
  - r=[0.764, 0.781], max_grad=0.08
  - r=[0.796, 0.829], max_grad=34.51
  - r=[0.841, 0.849], max_grad=0.07
  - r=[0.854, 0.866], max_grad=0.05
  - r=[0.894, 0.944], max_grad=15.63
  - r=[0.981, 0.994], max_grad=0.08
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.14507102966308594), (0.26875, 0.31625, 9.605903625488281), (0.32375000000000004, 0.33125, 0.07659339904785156), (0.33625, 0.34375000000000006, 0.05017709732055664), (0.52125, 0.5362499999999999, 0.06104397773742676), (0.5362500000000001, 0.57875, 31.070274353027344), (0.5962500000000001, 0.6087499999999999, 0.08892059326171875), (0.7637500000000002, 0.78125, 0.0814056396484375), (0.7962500000000001, 0.82875, 34.51351547241211), (0.84125, 0.8487499999999999, 0.074859619140625), (0.85375, 0.86625, 0.051744937896728516), (0.89375, 0.94375, 15.626752853393555), (0.9812500000000001, 0.9937499999999999, 0.07741546630859375)]
[AUTO ZONE B] Available segments after transition removal: [(0.33125, 0.33625), (0.34375000000000006, 0.52125), (0.5362499999999999, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.66)]
[AUTO ZONE B] excluded_ratio: 23.48% (0.077 / 0.330)
[AUTO ZONE B] Segment [0.344, 0.521] rejected: estimated_pixels=4963 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.609, 0.660] rejected: width=0.051 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.331, 0.336] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] Segment [0.536, 0.536] rejected: width=0.000 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.430145263671875, 0.0, 0.0], Lab_ink=None, std=[6.5, 0.0, 0.0], ΔE=71.60 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[26.23717498779297, 0.0, 0.0], Lab_ink=None, std=[36.9, 0.0, 0.0], ΔE=47.47 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[46.88304901123047, 0.0, 0.0], Lab_ink=None, std=[35.1, 0.0, 0.0], ΔE=29.18 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.03, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.42
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[LAB→RGB] Input LAB: L=2.75, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=7, a=128, b=128
[LAB→RGB] BGR: B=10, G=10, R=10
[LAB→RGB] Final RGB: R=10, G=10, B=10, HEX=#0A0A0A
[LAB→RGB] Input LAB: L=14.82, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=37, a=128, b=128
[LAB→RGB] BGR: B=36, G=37, R=36
[LAB→RGB] Final RGB: R=36, G=37, B=36, HEX=#242524
[INK_ESTIMATOR] Detected 2 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 2 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=49.42, confidence=0.42
  Total time:             1047.41 ms
  Avg per image:           209.48 ms
  Throughput:                4.77 images/sec
  Peak memory:               3.31 MB

Batch size: 10 images
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] WARNING: Excluded fraction 31.25% > 30%, keeping top ranges
[TRANSITION] Found 14 transition ranges:
  - r=[0.004, 0.019], max_grad=9.92
  - r=[0.021, 0.031], max_grad=2.98
  - r=[0.031, 0.081], max_grad=4.28
  - r=[0.084, 0.091], max_grad=0.06
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.541, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.0037500000000000003, 0.01875, 9.920345306396484), (0.02125, 0.031249999999999997, 2.9771270751953125), (0.03125, 0.08125, 4.284839630126953), (0.08375, 0.09125, 0.05530548095703125), (0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.54125, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.54125), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 17.42% (0.057 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.541] rejected: estimated_pixels=5906 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.
Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[19.476255416870117, 0.0, 0.0], Lab_ink=None, std=[8.9, 0.0, 0.0], ΔE=75.55 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.61 (worst=C), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.01, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.42
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=26.22, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=66, a=128, b=128
[LAB→RGB] BGR: B=61, G=61, R=61
[LAB→RGB] Final RGB: R=61, G=61, B=61, HEX=#3D3D3D
[INK_ESTIMATOR] Detected 2 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 2 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.60, confidence=0.42
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] Found 12 transition ranges:
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.521, 0.531], max_grad=0.04
  - r=[0.536, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.971, 0.979], max_grad=0.04
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.52125, 0.53125, 0.04029868543148041), (0.5362500000000001, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9712500000000001, 0.97875, 0.04158782958984375), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.52125), (0.53125, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 21.97% (0.072 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.521] rejected: estimated_pixels=5347 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] Segment [0.531, 0.536] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[18.940698623657227, 0.0, 0.0], Lab_ink=None, std=[5.9, 0.0, 0.0], ΔE=76.09 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.31, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.49
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[20.784315  0.        0.      ], Bright=[42.34713  0.       0.     ]
[MIXING_CHECK] Weights: Dark=0.920, Mid=0.036, Bright=0.045
[MIXING_CHECK] Distance: abs=0.00, relative=0.000 (len_db=42.35)
[MIXING_CHECK] Projection: ratio=0.491 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.491)
  - Close to line: True (rel_dist=0.000 < 0.15)
  - Mid weight OK: False (0.05 < 0.036 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid weight out of range (weight=0.036)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=20.78, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=53, a=128, b=128
[LAB→RGB] BGR: B=50, G=50, R=50
[LAB→RGB] Final RGB: R=50, G=50, B=50, HEX=#323232
[LAB→RGB] Input LAB: L=42.35, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=107, a=128, b=128
[LAB→RGB] BGR: B=99, G=99, R=99
[LAB→RGB] Final RGB: R=99, G=99, B=99, HEX=#636363
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.78, confidence=0.49
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...Low image mean_L (3.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] WARNING: Excluded fraction 33.25% > 30%, keeping top ranges
[TRANSITION] Found 13 transition ranges:
  - r=[0.236, 0.266], max_grad=0.15
  - r=[0.269, 0.316], max_grad=9.61
  - r=[0.324, 0.331], max_grad=0.08
  - r=[0.336, 0.344], max_grad=0.05
  - r=[0.521, 0.536], max_grad=0.06
  - r=[0.536, 0.579], max_grad=31.07
  - r=[0.596, 0.609], max_grad=0.09
  - r=[0.764, 0.781], max_grad=0.08
  - r=[0.796, 0.829], max_grad=34.51
  - r=[0.841, 0.849], max_grad=0.07
  - r=[0.854, 0.866], max_grad=0.05
  - r=[0.894, 0.944], max_grad=15.63
  - r=[0.981, 0.994], max_grad=0.08
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.14507102966308594), (0.26875, 0.31625, 9.605903625488281), (0.32375000000000004, 0.33125, 0.07659339904785156), (0.33625, 0.34375000000000006, 0.05017709732055664), (0.52125, 0.5362499999999999, 0.06104397773742676), (0.5362500000000001, 0.57875, 31.070274353027344), (0.5962500000000001, 0.6087499999999999, 0.08892059326171875), (0.7637500000000002, 0.78125, 0.0814056396484375), (0.7962500000000001, 0.82875, 34.51351547241211), (0.84125, 0.8487499999999999, 0.074859619140625), (0.85375, 0.86625, 0.051744937896728516), (0.89375, 0.94375, 15.626752853393555), (0.9812500000000001, 0.9937499999999999, 0.07741546630859375)]
[AUTO ZONE B] Available segments after transition removal: [(0.33125, 0.33625), (0.34375000000000006, 0.52125), (0.5362499999999999, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.66)]
[AUTO ZONE B] excluded_ratio: 23.48% (0.077 / 0.330)
[AUTO ZONE B] Segment [0.344, 0.521] rejected: estimated_pixels=4963 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.609, 0.660] rejected: width=0.051 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.331, 0.336] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] Segment [0.536, 0.536] rejected: width=0.000 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.430145263671875, 0.0, 0.0], Lab_ink=None, std=[6.5, 0.0, 0.0], ΔE=71.60 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[26.23717498779297, 0.0, 0.0], Lab_ink=None, std=[36.9, 0.0, 0.0], ΔE=47.47 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[46.88304901123047, 0.0, 0.0], Lab_ink=None, std=[35.1, 0.0, 0.0], ΔE=29.18 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.03, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.42
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[LAB→RGB] Input LAB: L=2.75, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=7, a=128, b=128
[LAB→RGB] BGR: B=10, G=10, R=10
[LAB→RGB] Final RGB: R=10, G=10, B=10, HEX=#0A0A0A
[LAB→RGB] Input LAB: L=14.82, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=37, a=128, b=128
[LAB→RGB] BGR: B=36, G=37, R=36
[LAB→RGB] Final RGB: R=36, G=37, B=36, HEX=#242524
[INK_ESTIMATOR] Detected 2 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 2 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=49.42, confidence=0.42
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] WARNING: Excluded fraction 31.25% > 30%, keeping top ranges
[TRANSITION] Found 14 transition ranges:
  - r=[0.004, 0.019], max_grad=9.92
  - r=[0.021, 0.031], max_grad=2.98
  - r=[0.031, 0.081], max_grad=4.28
  - r=[0.084, 0.091], max_grad=0.06
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.541, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.0037500000000000003, 0.01875, 9.920345306396484), (0.02125, 0.031249999999999997, 2.9771270751953125), (0.03125, 0.08125, 4.284839630126953), (0.08375, 0.09125, 0.05530548095703125), (0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.54125, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.54125), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 17.42% (0.057 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.541] rejected: estimated_pixels=5906 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[19.476255416870117, 0.0, 0.0], Lab_ink=None, std=[8.9, 0.0, 0.0], ΔE=75.55 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.
Low image mean_L (3.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.61 (worst=C), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.01, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.42
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=26.22, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=66, a=128, b=128
[LAB→RGB] BGR: B=61, G=61, R=61
[LAB→RGB] Final RGB: R=61, G=61, B=61, HEX=#3D3D3D
[INK_ESTIMATOR] Detected 2 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 2 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.60, confidence=0.42
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] WARNING: Excluded fraction 33.25% > 30%, keeping top ranges
[TRANSITION] Found 13 transition ranges:
  - r=[0.236, 0.266], max_grad=0.15
  - r=[0.269, 0.316], max_grad=9.61
  - r=[0.324, 0.331], max_grad=0.08
  - r=[0.336, 0.344], max_grad=0.05
  - r=[0.521, 0.536], max_grad=0.06
  - r=[0.536, 0.579], max_grad=31.07
  - r=[0.596, 0.609], max_grad=0.09
  - r=[0.764, 0.781], max_grad=0.08
  - r=[0.796, 0.829], max_grad=34.51
  - r=[0.841, 0.849], max_grad=0.07
  - r=[0.854, 0.866], max_grad=0.05
  - r=[0.894, 0.944], max_grad=15.63
  - r=[0.981, 0.994], max_grad=0.08
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.14507102966308594), (0.26875, 0.31625, 9.605903625488281), (0.32375000000000004, 0.33125, 0.07659339904785156), (0.33625, 0.34375000000000006, 0.05017709732055664), (0.52125, 0.5362499999999999, 0.06104397773742676), (0.5362500000000001, 0.57875, 31.070274353027344), (0.5962500000000001, 0.6087499999999999, 0.08892059326171875), (0.7637500000000002, 0.78125, 0.0814056396484375), (0.7962500000000001, 0.82875, 34.51351547241211), (0.84125, 0.8487499999999999, 0.074859619140625), (0.85375, 0.86625, 0.051744937896728516), (0.89375, 0.94375, 15.626752853393555), (0.9812500000000001, 0.9937499999999999, 0.07741546630859375)]
[AUTO ZONE B] Available segments after transition removal: [(0.33125, 0.33625), (0.34375000000000006, 0.52125), (0.5362499999999999, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.66)]
[AUTO ZONE B] excluded_ratio: 23.48% (0.077 / 0.330)
[AUTO ZONE B] Segment [0.344, 0.521] rejected: estimated_pixels=4963 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.609, 0.660] rejected: width=0.051 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.331, 0.336] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] Segment [0.536, 0.536] rejected: width=0.000 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.430145263671875, 0.0, 0.0], Lab_ink=None, std=[6.5, 0.0, 0.0], ΔE=71.60 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[26.23717498779297, 0.0, 0.0], Lab_ink=None, std=[36.9, 0.0, 0.0], ΔE=47.47 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[46.88304901123047, 0.0, 0.0], Lab_ink=None, std=[35.1, 0.0, 0.0], ΔE=29.18 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.03, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.42
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[LAB→RGB] Input LAB: L=2.75, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=7, a=128, b=128
[LAB→RGB] BGR: B=10, G=10, R=10
[LAB→RGB] Final RGB: R=10, G=10, B=10, HEX=#0A0A0A
[LAB→RGB] Input LAB: L=14.82, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=37, a=128, b=128
[LAB→RGB] BGR: B=36, G=37, R=36
[LAB→RGB] Final RGB: R=36, G=37, B=36, HEX=#242524
[INK_ESTIMATOR] Detected 2 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 2 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=49.42, confidence=0.42
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] Found 12 transition ranges:
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.521, 0.531], max_grad=0.04
  - r=[0.536, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.971, 0.979], max_grad=0.04
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.52125, 0.53125, 0.04029868543148041), (0.5362500000000001, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9712500000000001, 0.97875, 0.04158782958984375), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.
Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.52125), (0.53125, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 21.97% (0.072 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.521] rejected: estimated_pixels=5347 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] Segment [0.531, 0.536] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[18.940698623657227, 0.0, 0.0], Lab_ink=None, std=[5.9, 0.0, 0.0], ΔE=76.09 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.31, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.49
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[20.784315  0.        0.      ], Bright=[42.34713  0.       0.     ]
[MIXING_CHECK] Weights: Dark=0.920, Mid=0.036, Bright=0.045
[MIXING_CHECK] Distance: abs=0.00, relative=0.000 (len_db=42.35)
[MIXING_CHECK] Projection: ratio=0.491 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.491)
  - Close to line: True (rel_dist=0.000 < 0.15)
  - Mid weight OK: False (0.05 < 0.036 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid weight out of range (weight=0.036)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=20.78, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=53, a=128, b=128
[LAB→RGB] BGR: B=50, G=50, R=50
[LAB→RGB] Final RGB: R=50, G=50, B=50, HEX=#323232
[LAB→RGB] Input LAB: L=42.35, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=107, a=128, b=128
[LAB→RGB] BGR: B=99, G=99, R=99
[LAB→RGB] Final RGB: R=99, G=99, B=99, HEX=#636363
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.78, confidence=0.49
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] Found 12 transition ranges:
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.521, 0.531], max_grad=0.04
  - r=[0.536, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.971, 0.979], max_grad=0.04
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.52125, 0.53125, 0.04029868543148041), (0.5362500000000001, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9712500000000001, 0.97875, 0.04158782958984375), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.52125), (0.53125, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 21.97% (0.072 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.521] rejected: estimated_pixels=5347 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] Segment [0.531, 0.536] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[18.940698623657227, 0.0, 0.0], Lab_ink=None, std=[5.9, 0.0, 0.0], ΔE=76.09 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.31, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.49
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[20.784315  0.        0.      ], Bright=[42.34713  0.       0.     ]
[MIXING_CHECK] Weights: Dark=0.920, Mid=0.036, Bright=0.045
[MIXING_CHECK] Distance: abs=0.00, relative=0.000 (len_db=42.35)Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[MIXING_CHECK] Projection: ratio=0.491 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.491)
  - Close to line: True (rel_dist=0.000 < 0.15)
  - Mid weight OK: False (0.05 < 0.036 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid weight out of range (weight=0.036)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=20.78, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=53, a=128, b=128
[LAB→RGB] BGR: B=50, G=50, R=50
[LAB→RGB] Final RGB: R=50, G=50, B=50, HEX=#323232
[LAB→RGB] Input LAB: L=42.35, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=107, a=128, b=128
[LAB→RGB] BGR: B=99, G=99, R=99
[LAB→RGB] Final RGB: R=99, G=99, B=99, HEX=#636363
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.78, confidence=0.49
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] Found 12 transition ranges:
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.521, 0.531], max_grad=0.04
  - r=[0.536, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.971, 0.979], max_grad=0.04
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.52125, 0.53125, 0.04029868543148041), (0.5362500000000001, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9712500000000001, 0.97875, 0.04158782958984375), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.52125), (0.53125, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 21.97% (0.072 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.521] rejected: estimated_pixels=5347 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] Segment [0.531, 0.536] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[18.940698623657227, 0.0, 0.0], Lab_ink=None, std=[5.9, 0.0, 0.0], ΔE=76.09 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.31, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.49
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[20.784315  0.        0.      ], Bright=[42.34713  0.       0.     ]
[MIXING_CHECK] Weights: Dark=0.920, Mid=0.036, Bright=0.045
[MIXING_CHECK] Distance: abs=0.00, relative=0.000 (len_db=42.35)
[MIXING_CHECK] Projection: ratio=0.491 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.491)
  - Close to line: True (rel_dist=0.000 < 0.15)
  - Mid weight OK: False (0.05 < 0.036 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid weight out of range (weight=0.036)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=20.78, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=53, a=128, b=128
[LAB→RGB] BGR: B=50, G=50, R=50
[LAB→RGB] Final RGB: R=50, G=50, B=50, HEX=#323232
[LAB→RGB] Input LAB: L=42.35, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=107, a=128, b=128
[LAB→RGB] BGR: B=99, G=99, R=99
[LAB→RGB] Final RGB: R=99, G=99, B=99, HEX=#636363
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.78, confidence=0.49
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] Found 12 transition ranges:
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.521, 0.531], max_grad=0.04
  - r=[0.536, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.971, 0.979], max_grad=0.04
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.52125, 0.53125, 0.04029868543148041), (0.5362500000000001, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9712500000000001, 0.97875, 0.04158782958984375), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.
Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.52125), (0.53125, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 21.97% (0.072 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.521] rejected: estimated_pixels=5347 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] Segment [0.531, 0.536] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[18.940698623657227, 0.0, 0.0], Lab_ink=None, std=[5.9, 0.0, 0.0], ΔE=76.09 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.31, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.49
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[20.784315  0.        0.      ], Bright=[42.34713  0.       0.     ]
[MIXING_CHECK] Weights: Dark=0.920, Mid=0.036, Bright=0.045
[MIXING_CHECK] Distance: abs=0.00, relative=0.000 (len_db=42.35)
[MIXING_CHECK] Projection: ratio=0.491 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.491)
  - Close to line: True (rel_dist=0.000 < 0.15)
  - Mid weight OK: False (0.05 < 0.036 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid weight out of range (weight=0.036)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=20.78, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=53, a=128, b=128
[LAB→RGB] BGR: B=50, G=50, R=50
[LAB→RGB] Final RGB: R=50, G=50, B=50, HEX=#323232
[LAB→RGB] Input LAB: L=42.35, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=107, a=128, b=128
[LAB→RGB] BGR: B=99, G=99, R=99
[LAB→RGB] Final RGB: R=99, G=99, B=99, HEX=#636363
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.78, confidence=0.49
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] Found 12 transition ranges:
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.521, 0.531], max_grad=0.04
  - r=[0.536, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.971, 0.979], max_grad=0.04
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.52125, 0.53125, 0.04029868543148041), (0.5362500000000001, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9712500000000001, 0.97875, 0.04158782958984375), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.52125), (0.53125, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 21.97% (0.072 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.521] rejected: estimated_pixels=5347 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] Segment [0.531, 0.536] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[18.940698623657227, 0.0, 0.0], Lab_ink=None, std=[5.9, 0.0, 0.0], ΔE=76.09 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.31, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.49
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[20.784315  0.        0.      ], Bright=[42.34713  0.       0.     ]
[MIXING_CHECK] Weights: Dark=0.920, Mid=0.036, Bright=0.045
[MIXING_CHECK] Distance: abs=0.00, relative=0.000 (len_db=42.35)Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[MIXING_CHECK] Projection: ratio=0.491 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.491)
  - Close to line: True (rel_dist=0.000 < 0.15)
  - Mid weight OK: False (0.05 < 0.036 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid weight out of range (weight=0.036)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=20.78, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=53, a=128, b=128
[LAB→RGB] BGR: B=50, G=50, R=50
[LAB→RGB] Final RGB: R=50, G=50, B=50, HEX=#323232
[LAB→RGB] Input LAB: L=42.35, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=107, a=128, b=128
[LAB→RGB] BGR: B=99, G=99, R=99
[LAB→RGB] Final RGB: R=99, G=99, B=99, HEX=#636363
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.78, confidence=0.49
  Total time:             2250.75 ms
  Avg per image:           225.08 ms
  Throughput:                4.44 images/sec
  Peak memory:               2.62 MB

Batch size: 20 images
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] WARNING: Excluded fraction 31.25% > 30%, keeping top ranges
[TRANSITION] Found 14 transition ranges:
  - r=[0.004, 0.019], max_grad=9.92
  - r=[0.021, 0.031], max_grad=2.98
  - r=[0.031, 0.081], max_grad=4.28
  - r=[0.084, 0.091], max_grad=0.06
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.541, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.0037500000000000003, 0.01875, 9.920345306396484), (0.02125, 0.031249999999999997, 2.9771270751953125), (0.03125, 0.08125, 4.284839630126953), (0.08375, 0.09125, 0.05530548095703125), (0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.54125, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.54125), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 17.42% (0.057 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.541] rejected: estimated_pixels=5906 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[19.476255416870117, 0.0, 0.0], Lab_ink=None, std=[8.9, 0.0, 0.0], ΔE=75.55 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.61 (worst=C), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.01, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.42
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=26.22, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=66, a=128, b=128
[LAB→RGB] BGR: B=61, G=61, R=61
[LAB→RGB] Final RGB: R=61, G=61, B=61, HEX=#3D3D3D
[INK_ESTIMATOR] Detected 2 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 2 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.60, confidence=0.42
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] Found 12 transition ranges:
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.521, 0.531], max_grad=0.04
  - r=[0.536, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.971, 0.979], max_grad=0.04
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.52125, 0.53125, 0.04029868543148041), (0.5362500000000001, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9712500000000001, 0.97875, 0.04158782958984375), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.52125), (0.53125, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.
Low image mean_L (3.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[AUTO ZONE B] excluded_ratio: 21.97% (0.072 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.521] rejected: estimated_pixels=5347 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] Segment [0.531, 0.536] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[18.940698623657227, 0.0, 0.0], Lab_ink=None, std=[5.9, 0.0, 0.0], ΔE=76.09 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.31, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.49
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[20.784315  0.        0.      ], Bright=[42.34713  0.       0.     ]
[MIXING_CHECK] Weights: Dark=0.920, Mid=0.036, Bright=0.045
[MIXING_CHECK] Distance: abs=0.00, relative=0.000 (len_db=42.35)
[MIXING_CHECK] Projection: ratio=0.491 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.491)
  - Close to line: True (rel_dist=0.000 < 0.15)
  - Mid weight OK: False (0.05 < 0.036 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid weight out of range (weight=0.036)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=20.78, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=53, a=128, b=128
[LAB→RGB] BGR: B=50, G=50, R=50
[LAB→RGB] Final RGB: R=50, G=50, B=50, HEX=#323232
[LAB→RGB] Input LAB: L=42.35, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=107, a=128, b=128
[LAB→RGB] BGR: B=99, G=99, R=99
[LAB→RGB] Final RGB: R=99, G=99, B=99, HEX=#636363
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.78, confidence=0.49
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] WARNING: Excluded fraction 33.25% > 30%, keeping top ranges
[TRANSITION] Found 13 transition ranges:
  - r=[0.236, 0.266], max_grad=0.15
  - r=[0.269, 0.316], max_grad=9.61
  - r=[0.324, 0.331], max_grad=0.08
  - r=[0.336, 0.344], max_grad=0.05
  - r=[0.521, 0.536], max_grad=0.06
  - r=[0.536, 0.579], max_grad=31.07
  - r=[0.596, 0.609], max_grad=0.09
  - r=[0.764, 0.781], max_grad=0.08
  - r=[0.796, 0.829], max_grad=34.51
  - r=[0.841, 0.849], max_grad=0.07
  - r=[0.854, 0.866], max_grad=0.05
  - r=[0.894, 0.944], max_grad=15.63
  - r=[0.981, 0.994], max_grad=0.08
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.14507102966308594), (0.26875, 0.31625, 9.605903625488281), (0.32375000000000004, 0.33125, 0.07659339904785156), (0.33625, 0.34375000000000006, 0.05017709732055664), (0.52125, 0.5362499999999999, 0.06104397773742676), (0.5362500000000001, 0.57875, 31.070274353027344), (0.5962500000000001, 0.6087499999999999, 0.08892059326171875), (0.7637500000000002, 0.78125, 0.0814056396484375), (0.7962500000000001, 0.82875, 34.51351547241211), (0.84125, 0.8487499999999999, 0.074859619140625), (0.85375, 0.86625, 0.051744937896728516), (0.89375, 0.94375, 15.626752853393555), (0.9812500000000001, 0.9937499999999999, 0.07741546630859375)]
[AUTO ZONE B] Available segments after transition removal: [(0.33125, 0.33625), (0.34375000000000006, 0.52125), (0.5362499999999999, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.66)]
[AUTO ZONE B] excluded_ratio: 23.48% (0.077 / 0.330)
[AUTO ZONE B] Segment [0.344, 0.521] rejected: estimated_pixels=4963 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.609, 0.660] rejected: width=0.051 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.331, 0.336] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] Segment [0.536, 0.536] rejected: width=0.000 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.430145263671875, 0.0, 0.0], Lab_ink=None, std=[6.5, 0.0, 0.0], ΔE=71.60 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[26.23717498779297, 0.0, 0.0], Lab_ink=None, std=[36.9, 0.0, 0.0], ΔE=47.47 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[46.88304901123047, 0.0, 0.0], Lab_ink=None, std=[35.1, 0.0, 0.0], ΔE=29.18 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.03, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.42
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[LAB→RGB] Input LAB: L=2.75, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=7, a=128, b=128
[LAB→RGB] BGR: B=10, G=10, R=10
[LAB→RGB] Final RGB: R=10, G=10, B=10, HEX=#0A0A0A
[LAB→RGB] Input LAB: L=14.82, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=37, a=128, b=128Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[LAB→RGB] BGR: B=36, G=37, R=36
[LAB→RGB] Final RGB: R=36, G=37, B=36, HEX=#242524
[INK_ESTIMATOR] Detected 2 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 2 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=49.42, confidence=0.42
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] WARNING: Excluded fraction 31.25% > 30%, keeping top ranges
[TRANSITION] Found 14 transition ranges:
  - r=[0.004, 0.019], max_grad=9.92
  - r=[0.021, 0.031], max_grad=2.98
  - r=[0.031, 0.081], max_grad=4.28
  - r=[0.084, 0.091], max_grad=0.06
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.541, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.0037500000000000003, 0.01875, 9.920345306396484), (0.02125, 0.031249999999999997, 2.9771270751953125), (0.03125, 0.08125, 4.284839630126953), (0.08375, 0.09125, 0.05530548095703125), (0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.54125, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.54125), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 17.42% (0.057 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.541] rejected: estimated_pixels=5906 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[19.476255416870117, 0.0, 0.0], Lab_ink=None, std=[8.9, 0.0, 0.0], ΔE=75.55 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.61 (worst=C), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.01, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.42
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=26.22, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=66, a=128, b=128
[LAB→RGB] BGR: B=61, G=61, R=61
[LAB→RGB] Final RGB: R=61, G=61, B=61, HEX=#3D3D3D
[INK_ESTIMATOR] Detected 2 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 2 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.60, confidence=0.42
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] WARNING: Excluded fraction 33.25% > 30%, keeping top ranges
[TRANSITION] Found 13 transition ranges:
  - r=[0.236, 0.266], max_grad=0.15
  - r=[0.269, 0.316], max_grad=9.61
  - r=[0.324, 0.331], max_grad=0.08
  - r=[0.336, 0.344], max_grad=0.05
  - r=[0.521, 0.536], max_grad=0.06
  - r=[0.536, 0.579], max_grad=31.07
  - r=[0.596, 0.609], max_grad=0.09
  - r=[0.764, 0.781], max_grad=0.08
  - r=[0.796, 0.829], max_grad=34.51
  - r=[0.841, 0.849], max_grad=0.07
  - r=[0.854, 0.866], max_grad=0.05
  - r=[0.894, 0.944], max_grad=15.63
  - r=[0.981, 0.994], max_grad=0.08
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.14507102966308594), (0.26875, 0.31625, 9.605903625488281), (0.32375000000000004, 0.33125, 0.07659339904785156), (0.33625, 0.34375000000000006, 0.05017709732055664), (0.52125, 0.5362499999999999, 0.06104397773742676), (0.5362500000000001, 0.57875, 31.070274353027344), (0.5962500000000001, 0.6087499999999999, 0.08892059326171875), (0.7637500000000002, 0.78125, 0.0814056396484375), (0.7962500000000001, 0.82875, 34.51351547241211), (0.84125, 0.8487499999999999, 0.074859619140625), (0.85375, 0.86625, 0.051744937896728516), (0.89375, 0.94375, 15.626752853393555), (0.9812500000000001, 0.9937499999999999, 0.07741546630859375)]
[AUTO ZONE B] Available segments after transition removal: [(0.33125, 0.33625), (0.34375000000000006, 0.52125), (0.5362499999999999, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.66)]
[AUTO ZONE B] excluded_ratio: 23.48% (0.077 / 0.330)
[AUTO ZONE B] Segment [0.344, 0.521] rejected: estimated_pixels=4963 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.609, 0.660] rejected: width=0.051 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.331, 0.336] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] Segment [0.536, 0.536] rejected: width=0.000 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]Low image mean_L (3.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.
Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.430145263671875, 0.0, 0.0], Lab_ink=None, std=[6.5, 0.0, 0.0], ΔE=71.60 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[26.23717498779297, 0.0, 0.0], Lab_ink=None, std=[36.9, 0.0, 0.0], ΔE=47.47 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[46.88304901123047, 0.0, 0.0], Lab_ink=None, std=[35.1, 0.0, 0.0], ΔE=29.18 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.03, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.42
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[LAB→RGB] Input LAB: L=2.75, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=7, a=128, b=128
[LAB→RGB] BGR: B=10, G=10, R=10
[LAB→RGB] Final RGB: R=10, G=10, B=10, HEX=#0A0A0A
[LAB→RGB] Input LAB: L=14.82, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=37, a=128, b=128
[LAB→RGB] BGR: B=36, G=37, R=36
[LAB→RGB] Final RGB: R=36, G=37, B=36, HEX=#242524
[INK_ESTIMATOR] Detected 2 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 2 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=49.42, confidence=0.42
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] Found 12 transition ranges:
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.521, 0.531], max_grad=0.04
  - r=[0.536, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.971, 0.979], max_grad=0.04
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.52125, 0.53125, 0.04029868543148041), (0.5362500000000001, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9712500000000001, 0.97875, 0.04158782958984375), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.52125), (0.53125, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 21.97% (0.072 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.521] rejected: estimated_pixels=5347 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] Segment [0.531, 0.536] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[18.940698623657227, 0.0, 0.0], Lab_ink=None, std=[5.9, 0.0, 0.0], ΔE=76.09 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.31, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.49
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[20.784315  0.        0.      ], Bright=[42.34713  0.       0.     ]
[MIXING_CHECK] Weights: Dark=0.920, Mid=0.036, Bright=0.045
[MIXING_CHECK] Distance: abs=0.00, relative=0.000 (len_db=42.35)
[MIXING_CHECK] Projection: ratio=0.491 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.491)
  - Close to line: True (rel_dist=0.000 < 0.15)
  - Mid weight OK: False (0.05 < 0.036 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid weight out of range (weight=0.036)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=20.78, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=53, a=128, b=128
[LAB→RGB] BGR: B=50, G=50, R=50
[LAB→RGB] Final RGB: R=50, G=50, B=50, HEX=#323232
[LAB→RGB] Input LAB: L=42.35, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=107, a=128, b=128
[LAB→RGB] BGR: B=99, G=99, R=99
[LAB→RGB] Final RGB: R=99, G=99, B=99, HEX=#636363
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.78, confidence=0.49
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[TRANSITION] Found 12 transition ranges:
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.521, 0.531], max_grad=0.04
  - r=[0.536, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.971, 0.979], max_grad=0.04
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.52125, 0.53125, 0.04029868543148041), (0.5362500000000001, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9712500000000001, 0.97875, 0.04158782958984375), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.52125), (0.53125, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 21.97% (0.072 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.521] rejected: estimated_pixels=5347 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] Segment [0.531, 0.536] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[18.940698623657227, 0.0, 0.0], Lab_ink=None, std=[5.9, 0.0, 0.0], ΔE=76.09 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.31, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.49
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[20.784315  0.        0.      ], Bright=[42.34713  0.       0.     ]
[MIXING_CHECK] Weights: Dark=0.920, Mid=0.036, Bright=0.045
[MIXING_CHECK] Distance: abs=0.00, relative=0.000 (len_db=42.35)
[MIXING_CHECK] Projection: ratio=0.491 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.491)
  - Close to line: True (rel_dist=0.000 < 0.15)
  - Mid weight OK: False (0.05 < 0.036 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid weight out of range (weight=0.036)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=20.78, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=53, a=128, b=128
[LAB→RGB] BGR: B=50, G=50, R=50
[LAB→RGB] Final RGB: R=50, G=50, B=50, HEX=#323232
[LAB→RGB] Input LAB: L=42.35, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=107, a=128, b=128
[LAB→RGB] BGR: B=99, G=99, R=99
[LAB→RGB] Final RGB: R=99, G=99, B=99, HEX=#636363
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.78, confidence=0.49
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] Found 12 transition ranges:
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.521, 0.531], max_grad=0.04
  - r=[0.536, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.971, 0.979], max_grad=0.04
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.52125, 0.53125, 0.04029868543148041), (0.5362500000000001, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9712500000000001, 0.97875, 0.04158782958984375), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.52125), (0.53125, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 21.97% (0.072 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.521] rejected: estimated_pixels=5347 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] Segment [0.531, 0.536] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[18.940698623657227, 0.0, 0.0], Lab_ink=None, std=[5.9, 0.0, 0.0], ΔE=76.09 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.
Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.31, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.49
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[20.784315  0.        0.      ], Bright=[42.34713  0.       0.     ]
[MIXING_CHECK] Weights: Dark=0.920, Mid=0.036, Bright=0.045
[MIXING_CHECK] Distance: abs=0.00, relative=0.000 (len_db=42.35)
[MIXING_CHECK] Projection: ratio=0.491 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.491)
  - Close to line: True (rel_dist=0.000 < 0.15)
  - Mid weight OK: False (0.05 < 0.036 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid weight out of range (weight=0.036)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=20.78, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=53, a=128, b=128
[LAB→RGB] BGR: B=50, G=50, R=50
[LAB→RGB] Final RGB: R=50, G=50, B=50, HEX=#323232
[LAB→RGB] Input LAB: L=42.35, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=107, a=128, b=128
[LAB→RGB] BGR: B=99, G=99, R=99
[LAB→RGB] Final RGB: R=99, G=99, B=99, HEX=#636363
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.78, confidence=0.49
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] Found 12 transition ranges:
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.521, 0.531], max_grad=0.04
  - r=[0.536, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.971, 0.979], max_grad=0.04
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.52125, 0.53125, 0.04029868543148041), (0.5362500000000001, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9712500000000001, 0.97875, 0.04158782958984375), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.52125), (0.53125, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 21.97% (0.072 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.521] rejected: estimated_pixels=5347 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] Segment [0.531, 0.536] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[18.940698623657227, 0.0, 0.0], Lab_ink=None, std=[5.9, 0.0, 0.0], ΔE=76.09 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.31, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.49
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[20.784315  0.        0.      ], Bright=[42.34713  0.       0.     ]
[MIXING_CHECK] Weights: Dark=0.920, Mid=0.036, Bright=0.045
[MIXING_CHECK] Distance: abs=0.00, relative=0.000 (len_db=42.35)
[MIXING_CHECK] Projection: ratio=0.491 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.491)
  - Close to line: True (rel_dist=0.000 < 0.15)
  - Mid weight OK: False (0.05 < 0.036 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid weight out of range (weight=0.036)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=20.78, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=53, a=128, b=128
[LAB→RGB] BGR: B=50, G=50, R=50
[LAB→RGB] Final RGB: R=50, G=50, B=50, HEX=#323232
[LAB→RGB] Input LAB: L=42.35, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=107, a=128, b=128
[LAB→RGB] BGR: B=99, G=99, R=99
[LAB→RGB] Final RGB: R=99, G=99, B=99, HEX=#636363
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]Low image mean_L (2.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.78, confidence=0.49
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=15.1px (0.150), outer=95.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.01, MAD=0.01, threshold=0.04
[TRANSITION] Found 12 transition ranges:
  - r=[0.236, 0.266], max_grad=0.12
  - r=[0.269, 0.286], max_grad=0.10
  - r=[0.291, 0.316], max_grad=8.80
  - r=[0.521, 0.531], max_grad=0.04
  - r=[0.536, 0.579], max_grad=30.73
  - r=[0.596, 0.609], max_grad=0.08
  - r=[0.624, 0.631], max_grad=0.05
  - r=[0.759, 0.781], max_grad=0.08
  - r=[0.796, 0.821], max_grad=34.12
  - r=[0.916, 0.941], max_grad=15.11
  - r=[0.971, 0.979], max_grad=0.04
  - r=[0.981, 0.994], max_grad=0.07
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.23625000000000002, 0.26625000000000004, 0.11611557006835938), (0.26875, 0.28625000000000006, 0.09753036499023438), (0.29124999999999995, 0.31625, 8.804952621459961), (0.52125, 0.53125, 0.04029868543148041), (0.5362500000000001, 0.57875, 30.725570678710938), (0.5962500000000001, 0.6087499999999999, 0.0781402587890625), (0.62375, 0.63125, 0.05101776123046875), (0.75875, 0.78125, 0.0794830322265625), (0.7962500000000001, 0.82125, 34.1151123046875), (0.91625, 0.9412499999999999, 15.111936569213867), (0.9712500000000001, 0.97875, 0.04158782958984375), (0.9812500000000001, 0.9937499999999999, 0.07416534423828125)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.52125), (0.53125, 0.5362500000000001), (0.57875, 0.5962500000000001), (0.6087499999999999, 0.62375), (0.63125, 0.66)]
[AUTO ZONE B] excluded_ratio: 21.97% (0.072 / 0.330)
[AUTO ZONE B] Segment [0.330, 0.521] rejected: estimated_pixels=5347 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.631, 0.660] rejected: width=0.029 < min_width=0.15
[AUTO ZONE B] Segment [0.579, 0.596] rejected: width=0.018 < min_width=0.15
[AUTO ZONE B] Segment [0.609, 0.624] rejected: width=0.015 < min_width=0.15
[AUTO ZONE B] Segment [0.531, 0.536] rejected: width=0.005 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=4732, pixels_ink=0, ink_ratio=0.00%, Lab_all=[18.940698623657227, 0.0, 0.0], Lab_ink=None, std=[5.9, 0.0, 0.0], ΔE=76.09 (basis=mean_all)
  Zone B: pixels_all=6384, pixels_ink=0, ink_ratio=0.00%, Lab_all=[23.278833389282227, 0.0, 0.0], Lab_ink=None, std=[36.5, 0.0, 0.0], ΔE=50.09 (basis=mean_all)
  Zone A: pixels_all=14072, pixels_ink=0, ink_ratio=0.00%, Lab_all=[43.482452392578125, 0.0, 0.0], Lab_ink=None, std=[34.7, 0.0, 0.0], ΔE=29.16 (basis=mean_all)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.08 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.31, std=0.00, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.49
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 0
[INK_ZONE] Zone C excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone B excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[INK_ZONE] Zone A excluded (ink_ratio=0.0000% < 5%, ink_pixels=0)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[20.784315  0.        0.      ], Bright=[42.34713  0.       0.     ]
[MIXING_CHECK] Weights: Dark=0.920, Mid=0.036, Bright=0.045
[MIXING_CHECK] Distance: abs=0.00, relative=0.000 (len_db=42.35)
[MIXING_CHECK] Projection: ratio=0.491 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.491)
  - Close to line: True (rel_dist=0.000 < 0.15)
  - Mid weight OK: False (0.05 < 0.036 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid weight out of range (weight=0.036)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=20.78, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=53, a=128, b=128
[LAB→RGB] BGR: B=50, G=50, R=50
[LAB→RGB] Final RGB: R=50, G=50, B=50, HEX=#323232
[LAB→RGB] Input LAB: L=42.35, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=107, a=128, b=128
[LAB→RGB] BGR: B=99, G=99, R=99
[LAB→RGB] Final RGB: R=99, G=99, B=99, HEX=#636363
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 0 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=51.78, confidence=0.49
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=12.1px (0.150), outer=76.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.13, MAD=0.09, threshold=0.35
[TRANSITION] WARNING: Excluded fraction 30.75% > 30%, keeping top ranges
[TRANSITION] Found 15 transition ranges:
  - r=[0.009, 0.016], max_grad=7.39
  - r=[0.019, 0.036], max_grad=16.36
  - r=[0.041, 0.051], max_grad=14.46
  - r=[0.056, 0.071], max_grad=14.29
  - r=[0.074, 0.081], max_grad=4.96
  - r=[0.086, 0.101], max_grad=5.96
  - r=[0.104, 0.129], max_grad=7.73
  - r=[0.134, 0.146], max_grad=15.46
  - r=[0.294, 0.309], max_grad=16.78
  - r=[0.396, 0.471], max_grad=16.62
  - r=[0.696, 0.704], max_grad=0.37
  - r=[0.704, 0.774], max_grad=20.92
  - r=[0.801, 0.809], max_grad=0.41
  - r=[0.854, 0.861], max_grad=0.37
  - r=[0.909, 0.916], max_grad=0.44
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.008749999999999999, 0.01625, 7.386794090270996), (0.01875, 0.036250000000000004, 16.364465713500977), (0.041249999999999995, 0.051250000000000004, 14.455177307128906), (0.056249999999999994, 0.07125000000000001, 14.285562515258789), (0.07375, 0.08125, 4.9623847007751465), (0.08625, 0.10125, 5.957239627838135), (0.10375, 0.12875, 7.728430271148682), (0.13375, 0.14625, 15.461946487426758), (0.29375, 0.30875, 16.783170700073242), (0.39625000000000005, 0.47125, 16.615339279174805), (0.69625, 0.70375, 0.3715943694114685), (0.7037500000000001, 0.7737499999999999, 20.91559600830078), (0.80125, 0.80875, 0.4091525077819824), (0.85375, 0.86125, 0.373267263174057), (0.9087500000000001, 0.91625, 0.43832945823669434)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.39625000000000005), (0.47125, 0.66)]
[AUTO ZONE B] excluded_ratio: 22.73% (0.075 / 0.330)
[AUTO ZONE B] Segment [0.471, 0.660] rejected: estimated_pixels=3383 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.330, 0.396] rejected: width=0.066 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)Low image mean_L (4.8). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.
Low image mean_L (4.7). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=3048, pixels_ink=2998, ink_ratio=98.36%, Lab_all=[9.64653205871582, 38.38221740722656, -52.875], Lab_ink=[8.158020973205566, 39.013343811035156, -53.72948455810547], std=[11.5, 5.1, 6.8], ΔE=110.14 (basis=mean_ink)
  Zone B: pixels_all=4096, pixels_ink=2792, ink_ratio=68.16%, Lab_all=[1.5220906734466553, 7.36083984375, -11.08154296875], Lab_ink=[2.2194983959198, 10.84025764465332, -16.258596420288086], std=[2.8, 14.3, 19.6], ΔE=76.32 (basis=mean_ink)
  Zone A: pixels_all=9016, pixels_ink=1396, ink_ratio=15.48%, Lab_all=[50.74757385253906, 10.384760856628418, -44.21750259399414], Lab_ink=[1.579028844833374, 1.9025788307189941, -5.407593250274658], std=[24.5, 4.9, 19.9], ΔE=55.12 (basis=mean_ink)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=1.62 (worst=C), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.00, std=0.21, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.47
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 7186
[INK_ZONE] Zone C counted as ink (ink_ratio=41.72%, ink_pixels=2998)
[INK_ZONE] Zone B counted as ink (ink_ratio=38.85%, ink_pixels=2792)
[INK_ZONE] Zone A counted as ink (ink_ratio=19.43%, ink_pixels=1396)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[  8.125174  15.319192 -28.858585], Bright=[ 62.6653    12.517442 -54.19186 ]
[MIXING_CHECK] Weights: Dark=0.791, Mid=0.155, Bright=0.054
[MIXING_CHECK] Distance: abs=20.07, relative=0.240 (len_db=83.79)
[MIXING_CHECK] Projection: ratio=0.323 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.323)
  - Close to line: False (rel_dist=0.240 < 0.15)
  - Mid weight OK: True (0.05 < 0.155 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid too far from line (rel_dist=0.240)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=8.13, a=15.32, b=-28.86
[LAB→RGB] OpenCV LAB: L=20, a=143, b=99
[LAB→RGB] BGR: B=62, G=19, R=11
[LAB→RGB] Final RGB: R=11, G=19, B=62, HEX=#0B133E
[LAB→RGB] Input LAB: L=62.67, a=12.52, b=-54.19
[LAB→RGB] OpenCV LAB: L=159, a=140, b=73
[LAB→RGB] BGR: B=249, G=149, R=95
[LAB→RGB] Final RGB: R=95, G=149, B=249, HEX=#5F95F9
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 3 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=80.53, confidence=0.47
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=12.1px (0.150), outer=76.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.13, MAD=0.09, threshold=0.35
[TRANSITION] Found 10 transition ranges:
  - r=[0.019, 0.034], max_grad=16.78
  - r=[0.044, 0.051], max_grad=16.78
  - r=[0.134, 0.141], max_grad=16.78
  - r=[0.294, 0.309], max_grad=16.78
  - r=[0.396, 0.471], max_grad=16.62
  - r=[0.696, 0.704], max_grad=0.37
  - r=[0.704, 0.774], max_grad=20.92
  - r=[0.801, 0.809], max_grad=0.41
  - r=[0.854, 0.861], max_grad=0.37
  - r=[0.909, 0.916], max_grad=0.44
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.01875, 0.03375, 16.779489517211914), (0.04375, 0.051250000000000004, 16.779489517211914), (0.13375, 0.14125000000000001, 16.779489517211914), (0.29375, 0.30875, 16.783170700073242), (0.39625000000000005, 0.47125, 16.615339279174805), (0.69625, 0.70375, 0.3715943694114685), (0.7037500000000001, 0.7737499999999999, 20.91559600830078), (0.80125, 0.80875, 0.4091525077819824), (0.85375, 0.86125, 0.373267263174057), (0.9087500000000001, 0.91625, 0.43832945823669434)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.39625000000000005), (0.47125, 0.66)]
[AUTO ZONE B] excluded_ratio: 22.73% (0.075 / 0.330)
[AUTO ZONE B] Segment [0.471, 0.660] rejected: estimated_pixels=3383 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.330, 0.396] rejected: width=0.066 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=3048, pixels_ink=3048, ink_ratio=100.00%, Lab_all=[8.20174503326416, 39.17093276977539, -53.97113037109375], Lab_ink=[8.20174503326416, 39.17093276977539, -53.97113037109375], std=[0.2, 0.5, 0.5], ΔE=110.28 (basis=mean_ink)
  Zone B: pixels_all=4096, pixels_ink=2792, ink_ratio=68.16%, Lab_all=[1.5220906734466553, 7.36083984375, -11.08154296875], Lab_ink=[2.2194983959198, 10.84025764465332, -16.258596420288086], std=[2.8, 14.3, 19.6], ΔE=76.32 (basis=mean_ink)
  Zone A: pixels_all=9016, pixels_ink=1396, ink_ratio=15.48%, Lab_all=[50.74757385253906, 10.384760856628418, -44.21750259399414], Lab_ink=[1.579028844833374, 1.9025788307189941, -5.407593250274658], std=[24.5, 4.9, 19.9], ΔE=55.12 (basis=mean_ink)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.03 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.40, std=0.58, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.66
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 7236
[INK_ZONE] Zone C counted as ink (ink_ratio=42.12%, ink_pixels=3048)
[INK_ZONE] Zone B counted as ink (ink_ratio=38.58%, ink_pixels=2792)
[INK_ZONE] Zone A counted as ink (ink_ratio=19.29%, ink_pixels=1396)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[  7.6020246  16.170732  -29.359756 ], Bright=[ 62.65408   12.449857 -54.060173]
[MIXING_CHECK] Weights: Dark=0.792, Mid=0.154, Bright=0.054
[MIXING_CHECK] Distance: abs=21.19, relative=0.253 (len_db=83.68)
[MIXING_CHECK] Projection: ratio=0.323 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.323)
  - Close to line: False (rel_dist=0.253 < 0.15)
  - Mid weight OK: True (0.05 < 0.154 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid too far from line (rel_dist=0.253)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=7.60, a=16.17, b=-29.36
[LAB→RGB] OpenCV LAB: L=19, a=144, b=98
[LAB→RGB] BGR: B=63, G=17, R=10
[LAB→RGB] Final RGB: R=10, G=17, B=63, HEX=#0A113F
[LAB→RGB] Input LAB: L=62.65, a=12.45, b=-54.06Low image mean_L (7.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[LAB→RGB] OpenCV LAB: L=159, a=140, b=73
[LAB→RGB] BGR: B=249, G=149, R=95
[LAB→RGB] Final RGB: R=95, G=149, B=249, HEX=#5F95F9
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 3 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=80.58, confidence=0.66
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=12.1px (0.150), outer=76.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.12, MAD=0.08, threshold=0.32
[TRANSITION] Found 12 transition ranges:
  - r=[0.019, 0.034], max_grad=16.64
  - r=[0.044, 0.051], max_grad=16.64
  - r=[0.134, 0.141], max_grad=16.64
  - r=[0.251, 0.259], max_grad=0.32
  - r=[0.294, 0.309], max_grad=16.63
  - r=[0.376, 0.384], max_grad=0.32
  - r=[0.394, 0.471], max_grad=16.62
  - r=[0.551, 0.559], max_grad=0.35
  - r=[0.696, 0.774], max_grad=21.13
  - r=[0.801, 0.809], max_grad=0.35
  - r=[0.811, 0.819], max_grad=0.43
  - r=[0.909, 0.916], max_grad=0.33
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.01875, 0.03375, 16.644798278808594), (0.04375, 0.051250000000000004, 16.644798278808594), (0.13375, 0.14125000000000001, 16.644798278808594), (0.25125000000000003, 0.25875, 0.31896108388900757), (0.29375, 0.30875, 16.625272750854492), (0.37625000000000003, 0.38375, 0.32367709279060364), (0.39375, 0.47125, 16.61512565612793), (0.55125, 0.55875, 0.34855374693870544), (0.69625, 0.7737499999999999, 21.129440307617188), (0.80125, 0.80875, 0.3520619869232178), (0.81125, 0.81875, 0.4267866909503937), (0.9087500000000001, 0.91625, 0.328216552734375)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.37625000000000003), (0.38375, 0.39375), (0.47125, 0.55125), (0.55875, 0.66)]
[AUTO ZONE B] excluded_ratio: 28.03% (0.092 / 0.330)
[AUTO ZONE B] Segment [0.559, 0.660] rejected: width=0.101 < min_width=0.15
[AUTO ZONE B] Segment [0.471, 0.551] rejected: width=0.080 < min_width=0.15
[AUTO ZONE B] Segment [0.330, 0.376] rejected: width=0.046 < min_width=0.15
[AUTO ZONE B] Segment [0.384, 0.394] rejected: width=0.010 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=3048, pixels_ink=3048, ink_ratio=100.00%, Lab_all=[12.09157943725586, 37.22703552246094, -54.125328063964844], Lab_ink=[12.09157943725586, 37.22703552246094, -54.125328063964844], std=[0.2, 0.7, 0.6], ΔE=106.64 (basis=mean_ink)
  Zone B: pixels_all=4096, pixels_ink=2925, ink_ratio=71.41%, Lab_all=[4.437899589538574, 7.376708984375, -11.459228515625], Lab_ink=[5.104366779327393, 10.345641136169434, -16.028717041015625], std=[3.2, 13.8, 19.9], ΔE=73.69 (basis=mean_ink)
  Zone A: pixels_all=9016, pixels_ink=1408, ink_ratio=15.62%, Lab_all=[54.19093704223633, 8.249889373779297, -41.99689483642578], Lab_ink=[3.3146677017211914, 1.5276988744735718, -5.696732997894287], std=[24.9, 3.9, 18.6], ΔE=53.99 (basis=mean_ink)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.03 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.28, std=0.56, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.62
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 7381
[INK_ZONE] Zone C counted as ink (ink_ratio=41.30%, ink_pixels=3048)
[INK_ZONE] Zone B counted as ink (ink_ratio=39.63%, ink_pixels=2925)
[INK_ZONE] Zone A counted as ink (ink_ratio=19.08%, ink_pixels=1408)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[2.745098 0.       0.      ], Mid=[ 10.241327  14.1125   -28.014423], Bright=[ 66.29025    9.931232 -51.19198 ]
[MIXING_CHECK] Weights: Dark=0.783, Mid=0.162, Bright=0.054
[MIXING_CHECK] Distance: abs=20.44, relative=0.249 (len_db=82.20)
[MIXING_CHECK] Projection: ratio=0.303 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.303)
  - Close to line: False (rel_dist=0.249 < 0.15)
  - Mid weight OK: True (0.05 < 0.162 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid too far from line (rel_dist=0.249)
[LAB→RGB] Input LAB: L=2.75, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=7, a=128, b=128
[LAB→RGB] BGR: B=10, G=10, R=10
[LAB→RGB] Final RGB: R=10, G=10, B=10, HEX=#0A0A0A
[LAB→RGB] Input LAB: L=10.24, a=14.11, b=-28.01
[LAB→RGB] OpenCV LAB: L=26, a=142, b=99
[LAB→RGB] BGR: B=68, G=24, R=15
[LAB→RGB] Final RGB: R=15, G=24, B=68, HEX=#0F1844
[LAB→RGB] Input LAB: L=66.29, a=9.93, b=-51.19
[LAB→RGB] OpenCV LAB: L=169, a=137, b=76
[LAB→RGB] BGR: B=255, G=161, R=105
[LAB→RGB] Final RGB: R=105, G=161, B=255, HEX=#69A1FF
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 3 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=78.11, confidence=0.62
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=12.1px (0.150), outer=76.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.13, MAD=0.09, threshold=0.35
[TRANSITION] WARNING: Excluded fraction 30.75% > 30%, keeping top ranges
[TRANSITION] Found 15 transition ranges:
  - r=[0.009, 0.016], max_grad=7.39
  - r=[0.019, 0.036], max_grad=16.36
  - r=[0.041, 0.051], max_grad=14.46
  - r=[0.056, 0.071], max_grad=14.29
  - r=[0.074, 0.081], max_grad=4.96
  - r=[0.086, 0.101], max_grad=5.96
  - r=[0.104, 0.129], max_grad=7.73
  - r=[0.134, 0.146], max_grad=15.46
  - r=[0.294, 0.309], max_grad=16.78
  - r=[0.396, 0.471], max_grad=16.62
  - r=[0.696, 0.704], max_grad=0.37
  - r=[0.704, 0.774], max_grad=20.92
  - r=[0.801, 0.809], max_grad=0.41
  - r=[0.854, 0.861], max_grad=0.37
  - r=[0.909, 0.916], max_grad=0.44
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.008749999999999999, 0.01625, 7.386794090270996), (0.01875, 0.036250000000000004, 16.364465713500977), (0.041249999999999995, 0.051250000000000004, 14.455177307128906), (0.056249999999999994, 0.07125000000000001, 14.285562515258789), (0.07375, 0.08125, 4.9623847007751465), (0.08625, 0.10125, 5.957239627838135), (0.10375, 0.12875, 7.728430271148682), (0.13375, 0.14625, 15.461946487426758), (0.29375, 0.30875, 16.783170700073242), (0.39625000000000005, 0.47125, 16.615339279174805), (0.69625, 0.70375, 0.3715943694114685), (0.7037500000000001, 0.7737499999999999, 20.91559600830078), (0.80125, 0.80875, 0.4091525077819824), (0.85375, 0.86125, 0.373267263174057), (0.9087500000000001, 0.91625, 0.43832945823669434)]Low image mean_L (4.8). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.
Low image mean_L (7.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.39625000000000005), (0.47125, 0.66)]
[AUTO ZONE B] excluded_ratio: 22.73% (0.075 / 0.330)
[AUTO ZONE B] Segment [0.471, 0.660] rejected: estimated_pixels=3383 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.330, 0.396] rejected: width=0.066 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=3048, pixels_ink=2998, ink_ratio=98.36%, Lab_all=[9.64653205871582, 38.38221740722656, -52.875], Lab_ink=[8.158020973205566, 39.013343811035156, -53.72948455810547], std=[11.5, 5.1, 6.8], ΔE=110.14 (basis=mean_ink)
  Zone B: pixels_all=4096, pixels_ink=2792, ink_ratio=68.16%, Lab_all=[1.5220906734466553, 7.36083984375, -11.08154296875], Lab_ink=[2.2194983959198, 10.84025764465332, -16.258596420288086], std=[2.8, 14.3, 19.6], ΔE=76.32 (basis=mean_ink)
  Zone A: pixels_all=9016, pixels_ink=1396, ink_ratio=15.48%, Lab_all=[50.74757385253906, 10.384760856628418, -44.21750259399414], Lab_ink=[1.579028844833374, 1.9025788307189941, -5.407593250274658], std=[24.5, 4.9, 19.9], ΔE=55.12 (basis=mean_ink)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=1.62 (worst=C), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.00, std=0.21, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.47
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 7186
[INK_ZONE] Zone C counted as ink (ink_ratio=41.72%, ink_pixels=2998)
[INK_ZONE] Zone B counted as ink (ink_ratio=38.85%, ink_pixels=2792)
[INK_ZONE] Zone A counted as ink (ink_ratio=19.43%, ink_pixels=1396)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[  8.125174  15.319192 -28.858585], Bright=[ 62.6653    12.517442 -54.19186 ]
[MIXING_CHECK] Weights: Dark=0.791, Mid=0.155, Bright=0.054
[MIXING_CHECK] Distance: abs=20.07, relative=0.240 (len_db=83.79)
[MIXING_CHECK] Projection: ratio=0.323 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.323)
  - Close to line: False (rel_dist=0.240 < 0.15)
  - Mid weight OK: True (0.05 < 0.155 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid too far from line (rel_dist=0.240)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=8.13, a=15.32, b=-28.86
[LAB→RGB] OpenCV LAB: L=20, a=143, b=99
[LAB→RGB] BGR: B=62, G=19, R=11
[LAB→RGB] Final RGB: R=11, G=19, B=62, HEX=#0B133E
[LAB→RGB] Input LAB: L=62.67, a=12.52, b=-54.19
[LAB→RGB] OpenCV LAB: L=159, a=140, b=73
[LAB→RGB] BGR: B=249, G=149, R=95
[LAB→RGB] Final RGB: R=95, G=149, B=249, HEX=#5F95F9
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 3 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=80.53, confidence=0.47
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=12.1px (0.150), outer=76.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.12, MAD=0.08, threshold=0.32
[TRANSITION] Found 12 transition ranges:
  - r=[0.019, 0.034], max_grad=16.64
  - r=[0.044, 0.051], max_grad=16.64
  - r=[0.134, 0.141], max_grad=16.64
  - r=[0.251, 0.259], max_grad=0.32
  - r=[0.294, 0.309], max_grad=16.63
  - r=[0.376, 0.384], max_grad=0.32
  - r=[0.394, 0.471], max_grad=16.62
  - r=[0.551, 0.559], max_grad=0.35
  - r=[0.696, 0.774], max_grad=21.13
  - r=[0.801, 0.809], max_grad=0.35
  - r=[0.811, 0.819], max_grad=0.43
  - r=[0.909, 0.916], max_grad=0.33
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.01875, 0.03375, 16.644798278808594), (0.04375, 0.051250000000000004, 16.644798278808594), (0.13375, 0.14125000000000001, 16.644798278808594), (0.25125000000000003, 0.25875, 0.31896108388900757), (0.29375, 0.30875, 16.625272750854492), (0.37625000000000003, 0.38375, 0.32367709279060364), (0.39375, 0.47125, 16.61512565612793), (0.55125, 0.55875, 0.34855374693870544), (0.69625, 0.7737499999999999, 21.129440307617188), (0.80125, 0.80875, 0.3520619869232178), (0.81125, 0.81875, 0.4267866909503937), (0.9087500000000001, 0.91625, 0.328216552734375)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.37625000000000003), (0.38375, 0.39375), (0.47125, 0.55125), (0.55875, 0.66)]
[AUTO ZONE B] excluded_ratio: 28.03% (0.092 / 0.330)
[AUTO ZONE B] Segment [0.559, 0.660] rejected: width=0.101 < min_width=0.15
[AUTO ZONE B] Segment [0.471, 0.551] rejected: width=0.080 < min_width=0.15
[AUTO ZONE B] Segment [0.330, 0.376] rejected: width=0.046 < min_width=0.15
[AUTO ZONE B] Segment [0.384, 0.394] rejected: width=0.010 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=3048, pixels_ink=3048, ink_ratio=100.00%, Lab_all=[12.09157943725586, 37.22703552246094, -54.125328063964844], Lab_ink=[12.09157943725586, 37.22703552246094, -54.125328063964844], std=[0.2, 0.7, 0.6], ΔE=106.64 (basis=mean_ink)
  Zone B: pixels_all=4096, pixels_ink=2925, ink_ratio=71.41%, Lab_all=[4.437899589538574, 7.376708984375, -11.459228515625], Lab_ink=[5.104366779327393, 10.345641136169434, -16.028717041015625], std=[3.2, 13.8, 19.9], ΔE=73.69 (basis=mean_ink)
  Zone A: pixels_all=9016, pixels_ink=1408, ink_ratio=15.62%, Lab_all=[54.19093704223633, 8.249889373779297, -41.99689483642578], Lab_ink=[3.3146677017211914, 1.5276988744735718, -5.696732997894287], std=[24.9, 3.9, 18.6], ΔE=53.99 (basis=mean_ink)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.03 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.28, std=0.56, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.62
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 7381
[INK_ZONE] Zone C counted as ink (ink_ratio=41.30%, ink_pixels=3048)
[INK_ZONE] Zone B counted as ink (ink_ratio=39.63%, ink_pixels=2925)
[INK_ZONE] Zone A counted as ink (ink_ratio=19.08%, ink_pixels=1408)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[2.745098 0.       0.      ], Mid=[ 10.241327  14.1125   -28.014423], Bright=[ 66.29025    9.931232 -51.19198 ]
[MIXING_CHECK] Weights: Dark=0.783, Mid=0.162, Bright=0.054Low image mean_L (4.8). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[MIXING_CHECK] Distance: abs=20.44, relative=0.249 (len_db=82.20)
[MIXING_CHECK] Projection: ratio=0.303 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.303)
  - Close to line: False (rel_dist=0.249 < 0.15)
  - Mid weight OK: True (0.05 < 0.162 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid too far from line (rel_dist=0.249)
[LAB→RGB] Input LAB: L=2.75, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=7, a=128, b=128
[LAB→RGB] BGR: B=10, G=10, R=10
[LAB→RGB] Final RGB: R=10, G=10, B=10, HEX=#0A0A0A
[LAB→RGB] Input LAB: L=10.24, a=14.11, b=-28.01
[LAB→RGB] OpenCV LAB: L=26, a=142, b=99
[LAB→RGB] BGR: B=68, G=24, R=15
[LAB→RGB] Final RGB: R=15, G=24, B=68, HEX=#0F1844
[LAB→RGB] Input LAB: L=66.29, a=9.93, b=-51.19
[LAB→RGB] OpenCV LAB: L=169, a=137, b=76
[LAB→RGB] BGR: B=255, G=161, R=105
[LAB→RGB] Final RGB: R=105, G=161, B=255, HEX=#69A1FF
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 3 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=78.11, confidence=0.62
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=12.1px (0.150), outer=76.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.13, MAD=0.09, threshold=0.35
[TRANSITION] WARNING: Excluded fraction 30.75% > 30%, keeping top ranges
[TRANSITION] Found 15 transition ranges:
  - r=[0.009, 0.016], max_grad=7.39
  - r=[0.019, 0.036], max_grad=16.36
  - r=[0.041, 0.051], max_grad=14.46
  - r=[0.056, 0.071], max_grad=14.29
  - r=[0.074, 0.081], max_grad=4.96
  - r=[0.086, 0.101], max_grad=5.96
  - r=[0.104, 0.129], max_grad=7.73
  - r=[0.134, 0.146], max_grad=15.46
  - r=[0.294, 0.309], max_grad=16.78
  - r=[0.396, 0.471], max_grad=16.62
  - r=[0.696, 0.704], max_grad=0.37
  - r=[0.704, 0.774], max_grad=20.92
  - r=[0.801, 0.809], max_grad=0.41
  - r=[0.854, 0.861], max_grad=0.37
  - r=[0.909, 0.916], max_grad=0.44
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.008749999999999999, 0.01625, 7.386794090270996), (0.01875, 0.036250000000000004, 16.364465713500977), (0.041249999999999995, 0.051250000000000004, 14.455177307128906), (0.056249999999999994, 0.07125000000000001, 14.285562515258789), (0.07375, 0.08125, 4.9623847007751465), (0.08625, 0.10125, 5.957239627838135), (0.10375, 0.12875, 7.728430271148682), (0.13375, 0.14625, 15.461946487426758), (0.29375, 0.30875, 16.783170700073242), (0.39625000000000005, 0.47125, 16.615339279174805), (0.69625, 0.70375, 0.3715943694114685), (0.7037500000000001, 0.7737499999999999, 20.91559600830078), (0.80125, 0.80875, 0.4091525077819824), (0.85375, 0.86125, 0.373267263174057), (0.9087500000000001, 0.91625, 0.43832945823669434)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.39625000000000005), (0.47125, 0.66)]
[AUTO ZONE B] excluded_ratio: 22.73% (0.075 / 0.330)
[AUTO ZONE B] Segment [0.471, 0.660] rejected: estimated_pixels=3383 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.330, 0.396] rejected: width=0.066 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=3048, pixels_ink=2998, ink_ratio=98.36%, Lab_all=[9.64653205871582, 38.38221740722656, -52.875], Lab_ink=[8.158020973205566, 39.013343811035156, -53.72948455810547], std=[11.5, 5.1, 6.8], ΔE=110.14 (basis=mean_ink)
  Zone B: pixels_all=4096, pixels_ink=2792, ink_ratio=68.16%, Lab_all=[1.5220906734466553, 7.36083984375, -11.08154296875], Lab_ink=[2.2194983959198, 10.84025764465332, -16.258596420288086], std=[2.8, 14.3, 19.6], ΔE=76.32 (basis=mean_ink)
  Zone A: pixels_all=9016, pixels_ink=1396, ink_ratio=15.48%, Lab_all=[50.74757385253906, 10.384760856628418, -44.21750259399414], Lab_ink=[1.579028844833374, 1.9025788307189941, -5.407593250274658], std=[24.5, 4.9, 19.9], ΔE=55.12 (basis=mean_ink)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=1.62 (worst=C), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.00, std=0.21, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.47
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 7186
[INK_ZONE] Zone C counted as ink (ink_ratio=41.72%, ink_pixels=2998)
[INK_ZONE] Zone B counted as ink (ink_ratio=38.85%, ink_pixels=2792)
[INK_ZONE] Zone A counted as ink (ink_ratio=19.43%, ink_pixels=1396)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[  8.125174  15.319192 -28.858585], Bright=[ 62.6653    12.517442 -54.19186 ]
[MIXING_CHECK] Weights: Dark=0.791, Mid=0.155, Bright=0.054
[MIXING_CHECK] Distance: abs=20.07, relative=0.240 (len_db=83.79)
[MIXING_CHECK] Projection: ratio=0.323 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.323)
  - Close to line: False (rel_dist=0.240 < 0.15)
  - Mid weight OK: True (0.05 < 0.155 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid too far from line (rel_dist=0.240)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=8.13, a=15.32, b=-28.86
[LAB→RGB] OpenCV LAB: L=20, a=143, b=99
[LAB→RGB] BGR: B=62, G=19, R=11
[LAB→RGB] Final RGB: R=11, G=19, B=62, HEX=#0B133E
[LAB→RGB] Input LAB: L=62.67, a=12.52, b=-54.19
[LAB→RGB] OpenCV LAB: L=159, a=140, b=73
[LAB→RGB] BGR: B=249, G=149, R=95
[LAB→RGB] Final RGB: R=95, G=149, B=249, HEX=#5F95F9
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 3 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=80.53, confidence=0.47
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=12.1px (0.150), outer=76.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.13, MAD=0.09, threshold=0.35
[TRANSITION] Found 10 transition ranges:
  - r=[0.019, 0.034], max_grad=16.78
  - r=[0.044, 0.051], max_grad=16.78
  - r=[0.134, 0.141], max_grad=16.78
  - r=[0.294, 0.309], max_grad=16.78
  - r=[0.396, 0.471], max_grad=16.62
  - r=[0.696, 0.704], max_grad=0.37
  - r=[0.704, 0.774], max_grad=20.92
  - r=[0.801, 0.809], max_grad=0.41
  - r=[0.854, 0.861], max_grad=0.37
  - r=[0.909, 0.916], max_grad=0.44
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...Low image mean_L (4.7). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.01875, 0.03375, 16.779489517211914), (0.04375, 0.051250000000000004, 16.779489517211914), (0.13375, 0.14125000000000001, 16.779489517211914), (0.29375, 0.30875, 16.783170700073242), (0.39625000000000005, 0.47125, 16.615339279174805), (0.69625, 0.70375, 0.3715943694114685), (0.7037500000000001, 0.7737499999999999, 20.91559600830078), (0.80125, 0.80875, 0.4091525077819824), (0.85375, 0.86125, 0.373267263174057), (0.9087500000000001, 0.91625, 0.43832945823669434)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.39625000000000005), (0.47125, 0.66)]
[AUTO ZONE B] excluded_ratio: 22.73% (0.075 / 0.330)
[AUTO ZONE B] Segment [0.471, 0.660] rejected: estimated_pixels=3383 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.330, 0.396] rejected: width=0.066 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=3048, pixels_ink=3048, ink_ratio=100.00%, Lab_all=[8.20174503326416, 39.17093276977539, -53.97113037109375], Lab_ink=[8.20174503326416, 39.17093276977539, -53.97113037109375], std=[0.2, 0.5, 0.5], ΔE=110.28 (basis=mean_ink)
  Zone B: pixels_all=4096, pixels_ink=2792, ink_ratio=68.16%, Lab_all=[1.5220906734466553, 7.36083984375, -11.08154296875], Lab_ink=[2.2194983959198, 10.84025764465332, -16.258596420288086], std=[2.8, 14.3, 19.6], ΔE=76.32 (basis=mean_ink)
  Zone A: pixels_all=9016, pixels_ink=1396, ink_ratio=15.48%, Lab_all=[50.74757385253906, 10.384760856628418, -44.21750259399414], Lab_ink=[1.579028844833374, 1.9025788307189941, -5.407593250274658], std=[24.5, 4.9, 19.9], ΔE=55.12 (basis=mean_ink)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.03 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.40, std=0.58, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.66
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 7236
[INK_ZONE] Zone C counted as ink (ink_ratio=42.12%, ink_pixels=3048)
[INK_ZONE] Zone B counted as ink (ink_ratio=38.58%, ink_pixels=2792)
[INK_ZONE] Zone A counted as ink (ink_ratio=19.29%, ink_pixels=1396)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[  7.6020246  16.170732  -29.359756 ], Bright=[ 62.65408   12.449857 -54.060173]
[MIXING_CHECK] Weights: Dark=0.792, Mid=0.154, Bright=0.054
[MIXING_CHECK] Distance: abs=21.19, relative=0.253 (len_db=83.68)
[MIXING_CHECK] Projection: ratio=0.323 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.323)
  - Close to line: False (rel_dist=0.253 < 0.15)
  - Mid weight OK: True (0.05 < 0.154 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid too far from line (rel_dist=0.253)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=7.60, a=16.17, b=-29.36
[LAB→RGB] OpenCV LAB: L=19, a=144, b=98
[LAB→RGB] BGR: B=63, G=17, R=10
[LAB→RGB] Final RGB: R=10, G=17, B=63, HEX=#0A113F
[LAB→RGB] Input LAB: L=62.65, a=12.45, b=-54.06
[LAB→RGB] OpenCV LAB: L=159, a=140, b=73
[LAB→RGB] BGR: B=249, G=149, R=95
[LAB→RGB] Final RGB: R=95, G=149, B=249, HEX=#5F95F9
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 3 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=80.58, confidence=0.66
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=12.1px (0.150), outer=76.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.12, MAD=0.08, threshold=0.32
[TRANSITION] Found 12 transition ranges:
  - r=[0.019, 0.034], max_grad=16.64
  - r=[0.044, 0.051], max_grad=16.64
  - r=[0.134, 0.141], max_grad=16.64
  - r=[0.251, 0.259], max_grad=0.32
  - r=[0.294, 0.309], max_grad=16.63
  - r=[0.376, 0.384], max_grad=0.32
  - r=[0.394, 0.471], max_grad=16.62
  - r=[0.551, 0.559], max_grad=0.35
  - r=[0.696, 0.774], max_grad=21.13
  - r=[0.801, 0.809], max_grad=0.35
  - r=[0.811, 0.819], max_grad=0.43
  - r=[0.909, 0.916], max_grad=0.33
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.01875, 0.03375, 16.644798278808594), (0.04375, 0.051250000000000004, 16.644798278808594), (0.13375, 0.14125000000000001, 16.644798278808594), (0.25125000000000003, 0.25875, 0.31896108388900757), (0.29375, 0.30875, 16.625272750854492), (0.37625000000000003, 0.38375, 0.32367709279060364), (0.39375, 0.47125, 16.61512565612793), (0.55125, 0.55875, 0.34855374693870544), (0.69625, 0.7737499999999999, 21.129440307617188), (0.80125, 0.80875, 0.3520619869232178), (0.81125, 0.81875, 0.4267866909503937), (0.9087500000000001, 0.91625, 0.328216552734375)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.37625000000000003), (0.38375, 0.39375), (0.47125, 0.55125), (0.55875, 0.66)]
[AUTO ZONE B] excluded_ratio: 28.03% (0.092 / 0.330)
[AUTO ZONE B] Segment [0.559, 0.660] rejected: width=0.101 < min_width=0.15
[AUTO ZONE B] Segment [0.471, 0.551] rejected: width=0.080 < min_width=0.15
[AUTO ZONE B] Segment [0.330, 0.376] rejected: width=0.046 < min_width=0.15
[AUTO ZONE B] Segment [0.384, 0.394] rejected: width=0.010 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=3048, pixels_ink=3048, ink_ratio=100.00%, Lab_all=[12.09157943725586, 37.22703552246094, -54.125328063964844], Lab_ink=[12.09157943725586, 37.22703552246094, -54.125328063964844], std=[0.2, 0.7, 0.6], ΔE=106.64 (basis=mean_ink)
  Zone B: pixels_all=4096, pixels_ink=2925, ink_ratio=71.41%, Lab_all=[4.437899589538574, 7.376708984375, -11.459228515625], Lab_ink=[5.104366779327393, 10.345641136169434, -16.028717041015625], std=[3.2, 13.8, 19.9], ΔE=73.69 (basis=mean_ink)
  Zone A: pixels_all=9016, pixels_ink=1408, ink_ratio=15.62%, Lab_all=[54.19093704223633, 8.249889373779297, -41.99689483642578], Lab_ink=[3.3146677017211914, 1.5276988744735718, -5.696732997894287], std=[24.9, 3.9, 18.6], ΔE=53.99 (basis=mean_ink)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.03 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.28, std=0.56, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.62
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filteringLow image mean_L (7.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.
Low image mean_L (4.8). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 7381
[INK_ZONE] Zone C counted as ink (ink_ratio=41.30%, ink_pixels=3048)
[INK_ZONE] Zone B counted as ink (ink_ratio=39.63%, ink_pixels=2925)
[INK_ZONE] Zone A counted as ink (ink_ratio=19.08%, ink_pixels=1408)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[2.745098 0.       0.      ], Mid=[ 10.241327  14.1125   -28.014423], Bright=[ 66.29025    9.931232 -51.19198 ]
[MIXING_CHECK] Weights: Dark=0.783, Mid=0.162, Bright=0.054
[MIXING_CHECK] Distance: abs=20.44, relative=0.249 (len_db=82.20)
[MIXING_CHECK] Projection: ratio=0.303 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.303)
  - Close to line: False (rel_dist=0.249 < 0.15)
  - Mid weight OK: True (0.05 < 0.162 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid too far from line (rel_dist=0.249)
[LAB→RGB] Input LAB: L=2.75, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=7, a=128, b=128
[LAB→RGB] BGR: B=10, G=10, R=10
[LAB→RGB] Final RGB: R=10, G=10, B=10, HEX=#0A0A0A
[LAB→RGB] Input LAB: L=10.24, a=14.11, b=-28.01
[LAB→RGB] OpenCV LAB: L=26, a=142, b=99
[LAB→RGB] BGR: B=68, G=24, R=15
[LAB→RGB] Final RGB: R=15, G=24, B=68, HEX=#0F1844
[LAB→RGB] Input LAB: L=66.29, a=9.93, b=-51.19
[LAB→RGB] OpenCV LAB: L=169, a=137, b=76
[LAB→RGB] BGR: B=255, G=161, R=105
[LAB→RGB] Final RGB: R=105, G=161, B=255, HEX=#69A1FF
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 3 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=78.11, confidence=0.62
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=12.1px (0.150), outer=76.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...
[TRANSITION] Gradient stats: median=0.13, MAD=0.09, threshold=0.35
[TRANSITION] WARNING: Excluded fraction 30.75% > 30%, keeping top ranges
[TRANSITION] Found 15 transition ranges:
  - r=[0.009, 0.016], max_grad=7.39
  - r=[0.019, 0.036], max_grad=16.36
  - r=[0.041, 0.051], max_grad=14.46
  - r=[0.056, 0.071], max_grad=14.29
  - r=[0.074, 0.081], max_grad=4.96
  - r=[0.086, 0.101], max_grad=5.96
  - r=[0.104, 0.129], max_grad=7.73
  - r=[0.134, 0.146], max_grad=15.46
  - r=[0.294, 0.309], max_grad=16.78
  - r=[0.396, 0.471], max_grad=16.62
  - r=[0.696, 0.704], max_grad=0.37
  - r=[0.704, 0.774], max_grad=20.92
  - r=[0.801, 0.809], max_grad=0.41
  - r=[0.854, 0.861], max_grad=0.37
  - r=[0.909, 0.916], max_grad=0.44
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.008749999999999999, 0.01625, 7.386794090270996), (0.01875, 0.036250000000000004, 16.364465713500977), (0.041249999999999995, 0.051250000000000004, 14.455177307128906), (0.056249999999999994, 0.07125000000000001, 14.285562515258789), (0.07375, 0.08125, 4.9623847007751465), (0.08625, 0.10125, 5.957239627838135), (0.10375, 0.12875, 7.728430271148682), (0.13375, 0.14625, 15.461946487426758), (0.29375, 0.30875, 16.783170700073242), (0.39625000000000005, 0.47125, 16.615339279174805), (0.69625, 0.70375, 0.3715943694114685), (0.7037500000000001, 0.7737499999999999, 20.91559600830078), (0.80125, 0.80875, 0.4091525077819824), (0.85375, 0.86125, 0.373267263174057), (0.9087500000000001, 0.91625, 0.43832945823669434)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.39625000000000005), (0.47125, 0.66)]
[AUTO ZONE B] excluded_ratio: 22.73% (0.075 / 0.330)
[AUTO ZONE B] Segment [0.471, 0.660] rejected: estimated_pixels=3383 (min=30000, max=120000)
[AUTO ZONE B] Segment [0.330, 0.396] rejected: width=0.066 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=3048, pixels_ink=2998, ink_ratio=98.36%, Lab_all=[9.64653205871582, 38.38221740722656, -52.875], Lab_ink=[8.158020973205566, 39.013343811035156, -53.72948455810547], std=[11.5, 5.1, 6.8], ΔE=110.14 (basis=mean_ink)
  Zone B: pixels_all=4096, pixels_ink=2792, ink_ratio=68.16%, Lab_all=[1.5220906734466553, 7.36083984375, -11.08154296875], Lab_ink=[2.2194983959198, 10.84025764465332, -16.258596420288086], std=[2.8, 14.3, 19.6], ΔE=76.32 (basis=mean_ink)
  Zone A: pixels_all=9016, pixels_ink=1396, ink_ratio=15.48%, Lab_all=[50.74757385253906, 10.384760856628418, -44.21750259399414], Lab_ink=[1.579028844833374, 1.9025788307189941, -5.407593250274658], std=[24.5, 4.9, 19.9], ΔE=55.12 (basis=mean_ink)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=1.62 (worst=C), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.00, std=0.21, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.47
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 7186
[INK_ZONE] Zone C counted as ink (ink_ratio=41.72%, ink_pixels=2998)
[INK_ZONE] Zone B counted as ink (ink_ratio=38.85%, ink_pixels=2792)
[INK_ZONE] Zone A counted as ink (ink_ratio=19.43%, ink_pixels=1396)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[0. 0. 0.], Mid=[  8.125174  15.319192 -28.858585], Bright=[ 62.6653    12.517442 -54.19186 ]
[MIXING_CHECK] Weights: Dark=0.791, Mid=0.155, Bright=0.054
[MIXING_CHECK] Distance: abs=20.07, relative=0.240 (len_db=83.79)
[MIXING_CHECK] Projection: ratio=0.323 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.323)
  - Close to line: False (rel_dist=0.240 < 0.15)
  - Mid weight OK: True (0.05 < 0.155 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid too far from line (rel_dist=0.240)
[LAB→RGB] Input LAB: L=0.00, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=0, a=128, b=128
[LAB→RGB] BGR: B=0, G=0, R=0
[LAB→RGB] Final RGB: R=0, G=0, B=0, HEX=#000000
[LAB→RGB] Input LAB: L=8.13, a=15.32, b=-28.86
[LAB→RGB] OpenCV LAB: L=20, a=143, b=99
[LAB→RGB] BGR: B=62, G=19, R=11
[LAB→RGB] Final RGB: R=11, G=19, B=62, HEX=#0B133E
[LAB→RGB] Input LAB: L=62.67, a=12.52, b=-54.19
[LAB→RGB] OpenCV LAB: L=159, a=140, b=73
[LAB→RGB] BGR: B=249, G=149, R=95
[LAB→RGB] Final RGB: R=95, G=149, B=249, HEX=#5F95F9
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 3 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=80.53, confidence=0.47
[2D ZONE ANALYSIS] Starting...
[2D ZONE ANALYSIS] Building ink mask...
[2D ZONE ANALYSIS] Getting print boundaries from SKU config...
[PRINT BOUNDARIES] Using SKU config: inner=12.1px (0.150), outer=76.5px (0.950)
[2D ZONE ANALYSIS] Finding transition ranges...
[TRANSITION] Finding transition ranges (bins=400, sigma=1, k_mad=2.5)...Low image mean_L (7.6). Input image might be underexposed or very dark. Ink estimation reliability may be reduced.

[TRANSITION] Gradient stats: median=0.12, MAD=0.08, threshold=0.32
[TRANSITION] Found 12 transition ranges:
  - r=[0.019, 0.034], max_grad=16.64
  - r=[0.044, 0.051], max_grad=16.64
  - r=[0.134, 0.141], max_grad=16.64
  - r=[0.251, 0.259], max_grad=0.32
  - r=[0.294, 0.309], max_grad=16.63
  - r=[0.376, 0.384], max_grad=0.32
  - r=[0.394, 0.471], max_grad=16.62
  - r=[0.551, 0.559], max_grad=0.35
  - r=[0.696, 0.774], max_grad=21.13
  - r=[0.801, 0.809], max_grad=0.35
  - r=[0.811, 0.819], max_grad=0.43
  - r=[0.909, 0.916], max_grad=0.33
[2D ZONE ANALYSIS] Auto-defining Zone B...
[AUTO ZONE B] Defining Zone B (min_width=0.15, max_width=0.25, min_pixels=30000)...
[AUTO ZONE B] B_candidate_range: [0.330, 0.660], width=0.330
[AUTO ZONE B] transition_ranges: [(0.01875, 0.03375, 16.644798278808594), (0.04375, 0.051250000000000004, 16.644798278808594), (0.13375, 0.14125000000000001, 16.644798278808594), (0.25125000000000003, 0.25875, 0.31896108388900757), (0.29375, 0.30875, 16.625272750854492), (0.37625000000000003, 0.38375, 0.32367709279060364), (0.39375, 0.47125, 16.61512565612793), (0.55125, 0.55875, 0.34855374693870544), (0.69625, 0.7737499999999999, 21.129440307617188), (0.80125, 0.80875, 0.3520619869232178), (0.81125, 0.81875, 0.4267866909503937), (0.9087500000000001, 0.91625, 0.328216552734375)]
[AUTO ZONE B] Available segments after transition removal: [(0.33, 0.37625000000000003), (0.38375, 0.39375), (0.47125, 0.55125), (0.55875, 0.66)]
[AUTO ZONE B] excluded_ratio: 28.03% (0.092 / 0.330)
[AUTO ZONE B] Segment [0.559, 0.660] rejected: width=0.101 < min_width=0.15
[AUTO ZONE B] Segment [0.471, 0.551] rejected: width=0.080 < min_width=0.15
[AUTO ZONE B] Segment [0.330, 0.376] rejected: width=0.046 < min_width=0.15
[AUTO ZONE B] Segment [0.384, 0.394] rejected: width=0.010 < min_width=0.15
[AUTO ZONE B] No candidates met constraints (min/max width, pixels), using SAFE FALLBACK
[AUTO ZONE B] B_selected_range: [0.380, 0.610] (safe buffer fallback)
[2D ZONE ANALYSIS] Final zone specs: C=[0.00, 0.33], B=[0.380, 0.610], A=[0.66, 1.00]
[2D ZONE ANALYSIS] Building zone masks...
[2D ZONE ANALYSIS] Computing zone results...
  Zone C: pixels_all=3048, pixels_ink=3048, ink_ratio=100.00%, Lab_all=[12.09157943725586, 37.22703552246094, -54.125328063964844], Lab_ink=[12.09157943725586, 37.22703552246094, -54.125328063964844], std=[0.2, 0.7, 0.6], ΔE=106.64 (basis=mean_ink)
  Zone B: pixels_all=4096, pixels_ink=2925, ink_ratio=71.41%, Lab_all=[4.437899589538574, 7.376708984375, -11.459228515625], Lab_ink=[5.104366779327393, 10.345641136169434, -16.028717041015625], std=[3.2, 13.8, 19.9], ΔE=73.69 (basis=mean_ink)
  Zone A: pixels_all=9016, pixels_ink=1408, ink_ratio=15.62%, Lab_all=[54.19093704223633, 8.249889373779297, -41.99689483642578], Lab_ink=[3.3146677017211914, 1.5276988744735718, -5.696732997894287], std=[24.9, 3.9, 18.6], ΔE=53.99 (basis=mean_ink)
[2D ZONE ANALYSIS] Computing sector statistics...
[SECTOR] max_std_L=0.03 (worst=A), uniform=True
[2D ZONE ANALYSIS] Computing confidence...
[CONFIDENCE] Computing multi-factor confidence...
[CONFIDENCE] Scores: pixel=0.72, transition=0.28, std=0.56, sector=1.00, lens=0.99
[CONFIDENCE] Overall=0.62
[CONFIDENCE] Tier: REVIEW
================================================================================
[INK_ANALYSIS_START] Starting ink count analysis with pixel ratio filtering
================================================================================
[INK_ANALYSIS] Total ink pixels across all zones: 7381
[INK_ZONE] Zone C counted as ink (ink_ratio=41.30%, ink_pixels=3048)
[INK_ZONE] Zone B counted as ink (ink_ratio=39.63%, ink_pixels=2925)
[INK_ZONE] Zone A counted as ink (ink_ratio=19.08%, ink_pixels=1408)
[MIXING_CHECK] 3 clusters detected - checking if middle is mixed
[MIXING_CHECK] Dark=[2.745098 0.       0.      ], Mid=[ 10.241327  14.1125   -28.014423], Bright=[ 66.29025    9.931232 -51.19198 ]
[MIXING_CHECK] Weights: Dark=0.783, Mid=0.162, Bright=0.054
[MIXING_CHECK] Distance: abs=20.44, relative=0.249 (len_db=82.20)
[MIXING_CHECK] Projection: ratio=0.303 (0~1 사이면 중간 위치)
[MIXING_CHECK] Condition checks:
  - Mid between Dark-Bright: True (ratio=0.303)
  - Close to line: False (rel_dist=0.249 < 0.15)
  - Mid weight OK: True (0.05 < 0.162 < 0.7)
[MIXING_CHECK] X Mid-tone NOT mixed (conditions failed). Keeping 3 inks.
[MIXING_CHECK]   → Mid too far from line (rel_dist=0.249)
[LAB→RGB] Input LAB: L=2.75, a=0.00, b=0.00
[LAB→RGB] OpenCV LAB: L=7, a=128, b=128
[LAB→RGB] BGR: B=10, G=10, R=10
[LAB→RGB] Final RGB: R=10, G=10, B=10, HEX=#0A0A0A
[LAB→RGB] Input LAB: L=10.24, a=14.11, b=-28.01
[LAB→RGB] OpenCV LAB: L=26, a=142, b=99
[LAB→RGB] BGR: B=68, G=24, R=15
[LAB→RGB] Final RGB: R=15, G=24, B=68, HEX=#0F1844
[LAB→RGB] Input LAB: L=66.29, a=9.93, b=-51.19
[LAB→RGB] OpenCV LAB: L=169, a=137, b=76
[LAB→RGB] BGR: B=255, G=161, R=105
[LAB→RGB] Final RGB: R=105, G=161, B=255, HEX=#69A1FF
[INK_ESTIMATOR] Detected 3 inks (GMM-based)
[INK_ANALYSIS] Zone-based: 3 inks (from 3 zones), Image-based: 3 inks
[2D ZONE ANALYSIS] Debug info attached: ['B_candidate_range', 'transition_ranges', 'B_selected_range', 'excluded_ratio_B', 'used_fallback_B', 'retake_reasons', 'ok_context']
[2D ZONE ANALYSIS] used_fallback_B=True, B_range=[0.38, 0.61]
[2D ZONE ANALYSIS] Complete: RETAKE, ΔE=78.11, confidence=0.62
  Total time:             5998.51 ms
  Avg per image:           299.93 ms
  Throughput:                3.33 images/sec
  Peak memory:               1.79 MB

==========================================================================================
  SYSTEM INFORMATION
==========================================================================================
  OS: Windows 11
  CPU: 10 cores (12 threads)
  RAM: 39.6 GB
  Python: 3.13.0

==========================================================================================
  OPTIMIZATION RECOMMENDATIONS
==========================================================================================

1. 2D Zone Analysis is the bottleneck:
   - Consider reducing zone_masks resolution
   - Optimize sector statistics calculation
   - Cache ink_mask between SKUs if applicable

3. General optimizations:
   - Use NumPy vectorization for pixel operations
   - Implement multi-threading for batch processing
   - Consider GPU acceleration for cv2.warpPolar

4. Memory optimization:
   - Release debug_info when not needed
   - Use np.float32 instead of np.float64 where possible
   - Implement streaming for large batch jobs

==========================================================================================
  Profiling Complete!
==========================================================================================
