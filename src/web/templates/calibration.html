{% extends "_base_layout.html" %}

{% block title %}ìƒ‰ ì •í™•ë„ êµì • | Color Meter{% endblock %}

{% block extra_head %}
<style>
    body {
        background: linear-gradient(135deg, var(--bg-base) 0%, #1a1f35 100%);
    }

    .upload-zone {
        border: 2px dashed var(--border-default);
        border-radius: var(--radius-lg);
        padding: 3rem;
        text-align: center;
        transition: all 0.2s;
    }

    .upload-zone:hover {
        border-color: var(--color-primary);
        background: var(--bg-elevated);
    }
</style>
{% endblock %}

{% block content %}
<div class="container mx-auto px-6 py-8">
    <!-- Header -->
    <div class="mb-8">
        <h1 class="text-3xl font-bold mb-2">ìƒ‰ ì •í™•ë„ êµì •</h1>
        <p class="text-secondary">ColorCheckerë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸¡ì • í™˜ê²½ì˜ ìƒ‰ ì •í™•ë„ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤</p>
    </div>

    <!-- Instructions -->
    <div class="card mb-8">
        <h2 class="text-xl font-bold mb-4">ğŸ“¸ ColorChecker ì´¬ì˜ ì•ˆë‚´</h2>
        <div class="text-sm text-secondary space-y-2">
            <p>1. <strong>ColorChecker Classic 24íŒ¨ì¹˜</strong>ë¥¼ ì¸¡ì • í™˜ê²½ì— ë°°ì¹˜í•˜ì„¸ìš”.</p>
            <p>2. ë Œì¦ˆ ì¸¡ì •ê³¼ <strong>ë™ì¼í•œ ì¡°ëª…/ì¹´ë©”ë¼ ì„¤ì •</strong>ìœ¼ë¡œ ì´¬ì˜í•˜ì„¸ìš”.</p>
            <p>3. ColorChecker ì „ì²´ê°€ í™”ë©´ì— ë“¤ì–´ì˜¤ë„ë¡ ì´¬ì˜í•˜ì„¸ìš”.</p>
            <p>4. ê·¸ë¦¼ìë‚˜ ë°˜ì‚¬ê´‘ì´ ì—†ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>
        </div>
    </div>

    <!-- Upload Section -->
    <div id="uploadSection" class="upload-zone">
        <div class="mb-4">
            <i class="fa-solid fa-cloud-arrow-up text-6xl text-primary"></i>
        </div>
        <h3 class="text-lg font-semibold mb-2">ColorChecker ì´ë¯¸ì§€ ì—…ë¡œë“œ</h3>
        <p class="text-sm text-secondary mb-4">JPG, PNG, BMP í˜•ì‹ ì§€ì›</p>
        <input type="file" id="fileInput" accept=".jpg,.jpeg,.png,.bmp" class="hidden" />
        <button onclick="document.getElementById('fileInput').click()" class="btn btn-primary">
            íŒŒì¼ ì„ íƒ
        </button>
    </div>

    <!-- Loading -->
    <div id="loadingSection" class="hidden terminal-panel p-8 text-center">
        <div class="spinner spinner-lg mx-auto mb-4">
            <i class="fa-solid fa-spinner fa-spin text-4xl text-primary"></i>
        </div>
        <p class="text-secondary">ë¶„ì„ ì¤‘...</p>
    </div>

    <!-- Results -->
    <div id="resultsSection" class="hidden mt-8">
        <div class="card">
            <h3 class="text-lg font-bold mb-4">ë¶„ì„ ê²°ê³¼</h3>
            <p class="text-secondary text-sm">
                âš ï¸ <strong>ê¸°ì´ˆ êµ¬í˜„ ë‹¨ê³„</strong>: íŒ¨ì¹˜ ìë™ ê²€ì¶œ ë° ìƒì„¸ ë¶„ì„ì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.
            </p>
            <p class="text-secondary text-sm mt-2">
                í˜„ì¬ëŠ” ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° ê¸°ë³¸ êµ¬ì¡°ë§Œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.
            </p>
        </div>
    </div>

    <!-- Reference Info -->
    <div class="card mt-8">
        <h3 class="text-lg font-bold mb-4">ğŸ“ ColorChecker í‘œì¤€ê°’ (D65, 2Â°)</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
            <div>
                <p class="text-secondary mb-2"><strong>Chromatic Patches (1-18):</strong></p>
                <p class="text-xs text-dim">Dark Skin, Light Skin, Blue Sky, Foliage, Blue Flower, Bluish Green...</p>
            </div>
            <div>
                <p class="text-secondary mb-2"><strong>Grayscale Patches (19-24):</strong></p>
                <p class="text-xs text-dim">White (L*=96.5), Neutral 8, 6.5, 5, 3.5, Black (L*=20.5)</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    const fileInput = document.getElementById('fileInput');
    const uploadSection = document.getElementById('uploadSection');
    const loadingSection = document.getElementById('loadingSection');
    const resultsSection = document.getElementById('resultsSection');

    fileInput.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (!file) return;

        // Show loading
        uploadSection.classList.add('hidden');
        loadingSection.classList.remove('hidden');

        // Simulate analysis (ê¸°ì´ˆ êµ¬í˜„)
        setTimeout(() => {
            loadingSection.classList.add('hidden');
            resultsSection.classList.remove('hidden');

            // TODO: ì‹¤ì œ API í˜¸ì¶œ ì¶”ê°€
            // fetch('/api/v7/analyze_calibration', {...})
        }, 2000);
    });
</script>
{% endblock %}
